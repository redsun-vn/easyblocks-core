{"version":3,"file":"findComponentDefinition.cjs","sources":["../../../src/compiler/findComponentDefinition.ts"],"sourcesContent":["import { toArray } from \"@/utils\";\r\nimport { NoCodeComponentEntry } from \"../types\";\r\nimport {\r\n  InternalComponentDefinition,\r\n  InternalComponentDefinitions,\r\n} from \"./types\";\r\n\r\ntype AnyContextWithDefinitions = { definitions: InternalComponentDefinitions };\r\n\r\nfunction allDefs(\r\n  context?: AnyContextWithDefinitions\r\n): InternalComponentDefinition[] {\r\n  return context?.definitions.components || [];\r\n}\r\n\r\n/**\r\n * Versions with context and custom components sweep\r\n */\r\n\r\nexport function findComponentDefinition(\r\n  config: NoCodeComponentEntry | undefined | null,\r\n  context: AnyContextWithDefinitions\r\n): InternalComponentDefinition | undefined {\r\n  return $findComponentDefinition(config, context);\r\n}\r\n\r\nexport function findComponentDefinitionById(\r\n  id: string,\r\n  context: AnyContextWithDefinitions\r\n): InternalComponentDefinition | undefined {\r\n  return $findComponentDefinitionById(id, context);\r\n}\r\n\r\nexport function findComponentDefinitionsByType(\r\n  tag: string,\r\n  context: AnyContextWithDefinitions\r\n): InternalComponentDefinition[] {\r\n  return allDefs(context).filter((def) =>\r\n    toArray(def.type ?? []).includes(tag)\r\n  );\r\n}\r\n\r\n/**\r\n * Generic\r\n */\r\n\r\nfunction $findComponentDefinition(\r\n  config: NoCodeComponentEntry | undefined | null,\r\n  context?: AnyContextWithDefinitions\r\n): InternalComponentDefinition | undefined {\r\n  if (!config) {\r\n    return undefined;\r\n  }\r\n\r\n  return $findComponentDefinitionById(config._component, context);\r\n}\r\n\r\nfunction $findComponentDefinitionById(\r\n  id: string,\r\n  context?: AnyContextWithDefinitions\r\n): InternalComponentDefinition | undefined {\r\n  return allDefs(context).find((component) => component.id === id);\r\n}\r\n"],"names":["allDefs","context","definitions","components","findComponentDefinition","config","$findComponentDefinition","findComponentDefinitionById","id","$findComponentDefinitionById","findComponentDefinitionsByType","tag","filter","def","toArray","type","includes","undefined","_component","find","component"],"mappings":";;;;;;;AASA,SAASA,OAAOA,CACdC,OAAmC,EACJ;AAC/B,EAAA,OAAOA,OAAO,EAAEC,WAAW,CAACC,UAAU,IAAI,EAAE,CAAA;AAC9C,CAAA;;AAEA;AACA;AACA;;AAEO,SAASC,uBAAuBA,CACrCC,MAA+C,EAC/CJ,OAAkC,EACO;AACzC,EAAA,OAAOK,wBAAwB,CAACD,MAAM,EAAEJ,OAAO,CAAC,CAAA;AAClD,CAAA;AAEO,SAASM,2BAA2BA,CACzCC,EAAU,EACVP,OAAkC,EACO;AACzC,EAAA,OAAOQ,4BAA4B,CAACD,EAAE,EAAEP,OAAO,CAAC,CAAA;AAClD,CAAA;AAEO,SAASS,8BAA8BA,CAC5CC,GAAW,EACXV,OAAkC,EACH;EAC/B,OAAOD,OAAO,CAACC,OAAO,CAAC,CAACW,MAAM,CAAEC,GAAG,IACjCC,eAAO,CAACD,GAAG,CAACE,IAAI,IAAI,EAAE,CAAC,CAACC,QAAQ,CAACL,GAAG,CACtC,CAAC,CAAA;AACH,CAAA;;AAEA;AACA;AACA;;AAEA,SAASL,wBAAwBA,CAC/BD,MAA+C,EAC/CJ,OAAmC,EACM;EACzC,IAAI,CAACI,MAAM,EAAE;AACX,IAAA,OAAOY,SAAS,CAAA;AAClB,GAAA;AAEA,EAAA,OAAOR,4BAA4B,CAACJ,MAAM,CAACa,UAAU,EAAEjB,OAAO,CAAC,CAAA;AACjE,CAAA;AAEA,SAASQ,4BAA4BA,CACnCD,EAAU,EACVP,OAAmC,EACM;AACzC,EAAA,OAAOD,OAAO,CAACC,OAAO,CAAC,CAACkB,IAAI,CAAEC,SAAS,IAAKA,SAAS,CAACZ,EAAE,KAAKA,EAAE,CAAC,CAAA;AAClE;;;;;;"}