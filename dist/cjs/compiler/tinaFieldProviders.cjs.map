{"version":3,"file":"tinaFieldProviders.cjs","sources":["../../../src/compiler/tinaFieldProviders.ts"],"sourcesContent":["import { assertDefined } from \"@/utils\";\nimport {\n  AnyTinaField,\n  BooleanSchemaProp,\n  ComponentCollectionLocalisedSchemaProp,\n  ComponentCollectionSchemaProp,\n  ComponentSchemaProp,\n  ExternalSchemaProp,\n  LocalSchemaProp,\n  LocalTextReference,\n  NoCodeComponentEntry,\n  NumberSchemaProp,\n  PositionSchemaProp,\n  RadioGroupSchemaProp,\n  SchemaProp,\n  SelectSchemaProp,\n  StringSchemaProp,\n  TextSchemaProp,\n  TokenSchemaProp,\n} from \"../types\";\nimport { EditorContextType } from \"./types\";\n\nfunction getCommonFieldProps(\n  schemaProp: SchemaProp\n): Pick<\n  AnyTinaField,\n  | \"label\"\n  | \"name\"\n  | \"group\"\n  | \"schemaProp\"\n  | \"description\"\n  | \"isLabelHidden\"\n  | \"layout\"\n  | \"params\"\n> {\n  const label = schemaProp.label || schemaProp.prop;\n  const group = schemaProp.group || \"Properties\";\n\n  return {\n    label,\n    name: schemaProp.prop,\n    group,\n    schemaProp,\n    description: schemaProp.description,\n    isLabelHidden: schemaProp.isLabelHidden,\n    layout: schemaProp.layout,\n    params: \"params\" in schemaProp ? schemaProp.params : undefined,\n  };\n}\n\ntype FieldProvider<\n  S extends Exclude<\n    SchemaProp,\n    | ComponentSchemaProp\n    | ComponentCollectionSchemaProp\n    | ComponentCollectionLocalisedSchemaProp\n  >,\n  Value = Exclude<S[\"defaultValue\"], undefined>\n> = (\n  schemaProp: S,\n  editorContext: EditorContextType,\n  value: Value\n) => AnyTinaField;\n\ntype TinaFieldProviders = {\n  text: FieldProvider<TextSchemaProp>;\n  string: FieldProvider<StringSchemaProp>;\n  number: FieldProvider<NumberSchemaProp>;\n  boolean: FieldProvider<BooleanSchemaProp>;\n  select: FieldProvider<SelectSchemaProp>;\n  \"radio-group\": FieldProvider<RadioGroupSchemaProp>;\n  component: FieldProvider<ComponentSchemaProp, [] | [NoCodeComponentEntry]>;\n  \"component-collection\": FieldProvider<\n    ComponentCollectionSchemaProp,\n    Array<NoCodeComponentEntry>\n  >;\n  \"component-collection-localised\": FieldProvider<ComponentCollectionLocalisedSchemaProp>;\n  component$$$: FieldProvider<ComponentSchemaProp>;\n  external: FieldProvider<ExternalSchemaProp>;\n  custom: FieldProvider<ExternalSchemaProp | LocalSchemaProp | TokenSchemaProp>;\n  position: FieldProvider<PositionSchemaProp>;\n};\n\nconst tinaFieldProviders: TinaFieldProviders = {\n  text: (schemaProp, _, value) => {\n    if (!isValueLocalTextReference(value) && typeof value !== \"string\") {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"external\",\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"text\",\n      name: schemaProp.prop,\n      normalize: schemaProp.normalize,\n    };\n  },\n  number: (schemaProp) => {\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"number\",\n      step: 1,\n      min: schemaProp.params?.min,\n      max: schemaProp.params?.max,\n    };\n  },\n  string: (schemaProp) => {\n    if (schemaProp.responsive) {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"responsive2\",\n        subComponent: \"text\",\n        normalize: schemaProp.params?.normalize,\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"text\",\n      normalize: schemaProp.params?.normalize,\n    };\n  },\n  boolean: (schemaProp) => {\n    if (schemaProp.responsive) {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"responsive2\",\n        subComponent: \"toggle\",\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"toggle\",\n    };\n  },\n  select: (schemaProp) => {\n    if (schemaProp.responsive) {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"responsive2\",\n        subComponent: \"select\",\n        options: schemaProp.params.options,\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"select\",\n      options: schemaProp.params.options,\n    };\n  },\n  \"radio-group\": (schemaProp) => {\n    if (schemaProp.responsive) {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"responsive2\",\n        subComponent: \"radio-group\",\n        options: schemaProp.params.options,\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"radio-group\",\n      options: schemaProp.params.options,\n    };\n  },\n  component: (schemaProp) => {\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"block\",\n      schemaProp,\n    };\n  },\n  \"component-collection\": () => {\n    throw new Error(\"component-collection is not yet supported in sidebar\");\n  },\n\n  \"component-collection-localised\": () => {\n    throw new Error(\n      \"component-collection-localised is not yet supported in sidebar\"\n    );\n  },\n  component$$$: (schemaProp) => {\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"identity\",\n      schemaProp,\n    };\n  },\n  external: (schemaProp, editorContext) => {\n    const externalTypeDefinition = editorContext.types[schemaProp.type] as\n      | Extract<EditorContextType[\"types\"][string], { type: \"external\" }>\n      | undefined;\n\n    if (!externalTypeDefinition) {\n      throw new Error(`Can't find definition for type \"${schemaProp.type}\"`);\n    }\n\n    if (schemaProp.responsive) {\n      return {\n        ...getCommonFieldProps(schemaProp),\n        component: \"responsive2\",\n        subComponent: \"external\",\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"external\",\n    };\n  },\n  position: (schemaProp) => {\n    return {\n      ...getCommonFieldProps(schemaProp),\n      component: \"responsive2\",\n      subComponent: \"position\",\n    };\n  },\n  custom: (schemaProp, editorContext, value) => {\n    const customTypeDefinition = editorContext.types[schemaProp.type];\n\n    if (!customTypeDefinition) {\n      throw new Error(`Can't find definition for type \"${schemaProp.type}\"`);\n    }\n\n    if (customTypeDefinition.type === \"external\") {\n      return tinaFieldProviders.external(schemaProp, editorContext, value);\n    }\n\n    if (customTypeDefinition.type === \"token\") {\n      let tokens = assertDefined(\n        editorContext.theme[customTypeDefinition.token],\n        `Missing token values within the Easyblocks config for \"${customTypeDefinition.token}\"`\n      );\n\n      if (\n        \"params\" in schemaProp &&\n        schemaProp.params &&\n        \"prefix\" in schemaProp.params &&\n        typeof schemaProp.params.prefix === \"string\"\n      ) {\n        // Copy tokens to prevent mutating original tokens\n        tokens = { ...tokens };\n\n        for (const key in tokens) {\n          if (!key.startsWith(schemaProp.params.prefix + \".\")) {\n            delete tokens[key];\n          } else {\n            tokens[key] = {\n              ...tokens[key],\n              label: key.split(`${schemaProp.params.prefix}.`)[1],\n            };\n          }\n        }\n      }\n\n      const commonTokenFieldProps = {\n        tokens,\n        allowCustom: !!customTypeDefinition.allowCustom,\n        extraValues:\n          \"params\" in schemaProp &&\n            schemaProp.params &&\n            \"extraValues\" in schemaProp.params\n            ? schemaProp.params.extraValues\n            : undefined,\n      };\n\n      if (customTypeDefinition.responsiveness === \"never\") {\n        return {\n          ...getCommonFieldProps(schemaProp),\n          component: \"token\",\n          ...commonTokenFieldProps,\n        };\n      }\n\n      return {\n        ...getCommonFieldProps(schemaProp),\n        // Token fields are always responsive\n        component: \"responsive2\",\n        subComponent: \"token\",\n        ...commonTokenFieldProps,\n      };\n    }\n\n    return {\n      ...getCommonFieldProps(schemaProp),\n      ...(customTypeDefinition.responsiveness === \"always\" ||\n        (customTypeDefinition.responsiveness === \"optional\" &&\n          schemaProp.responsive)\n        ? {\n          component: \"responsive2\",\n          subComponent: \"local\",\n        }\n        : {\n          component: \"local\",\n        }),\n    };\n  },\n};\n\nexport function getTinaField<T extends SchemaProp>(\n  schemaProp: T,\n  editorContext: EditorContextType,\n  value: any\n) {\n  const fieldProvider =\n    editorContext.types[schemaProp.type] && schemaProp.type !== \"text\"\n      ? tinaFieldProviders.custom\n      : (tinaFieldProviders as any)[schemaProp.type];\n\n  return fieldProvider(schemaProp, editorContext, value);\n}\n\nfunction isValueLocalTextReference(\n  value: unknown\n): value is LocalTextReference {\n  if (!(typeof value === \"object\" && value !== null)) {\n    return false;\n  }\n\n  if (\n    !(\n      \"id\" in value &&\n      typeof (value as { id: unknown }).id === \"string\" &&\n      (value as { id: string }).id.startsWith(\"local.\")\n    )\n  ) {\n    return false;\n  }\n\n  if (!(\"value\" in value)) {\n    return false;\n  }\n\n  if (\n    !(\n      \"widgetId\" in value &&\n      typeof (value as { widgetId: unknown }).widgetId === \"string\" &&\n      (value as { widgetId: string }).widgetId === \"@easyblocks/local-text\"\n    )\n  ) {\n    return false;\n  }\n\n  return true;\n}\n"],"names":["getCommonFieldProps","schemaProp","label","prop","group","name","description","isLabelHidden","layout","params","undefined","tinaFieldProviders","text","_","value","isValueLocalTextReference","component","normalize","number","step","min","max","string","responsive","subComponent","boolean","select","options","component-collection","Error","component-collection-localised","component$$$","external","editorContext","externalTypeDefinition","types","type","position","custom","customTypeDefinition","tokens","assertDefined","theme","token","prefix","key","startsWith","split","commonTokenFieldProps","allowCustom","extraValues","responsiveness","getTinaField","fieldProvider","id","widgetId"],"mappings":"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"}