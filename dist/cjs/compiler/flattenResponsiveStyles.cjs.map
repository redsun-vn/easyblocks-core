{"version":3,"file":"flattenResponsiveStyles.cjs","sources":["../../../src/compiler/flattenResponsiveStyles.ts"],"sourcesContent":["/**\r\n * This function is necessary because if we have Stitches styles object, its breakpoint values should be only on the top level.\r\n * We can have them nested so we need to transform styles object so that responsive styles goes to the top level.\r\n */\r\n\r\nexport function flattenResponsiveStyles(\r\n  styles: Record<string, any>\r\n): Record<string, any> {\r\n  const result: Record<string, any> = {};\r\n\r\n  for (const key in styles) {\r\n    const value = styles[key];\r\n\r\n    if (key.startsWith(\"@\")) {\r\n      if (!result[key]) {\r\n        result[key] = {};\r\n      }\r\n\r\n      result[key] = { ...result[key], ...value };\r\n      continue;\r\n    }\r\n\r\n    if (typeof value === \"object\" && value !== null) {\r\n      const flattenedValue = flattenResponsiveStyles(value);\r\n\r\n      // MERGE\r\n\r\n      const nonResponsiveValues: Record<string, any> = {};\r\n      const responsiveValues: Record<string, any> = {};\r\n\r\n      for (const key2 in flattenedValue) {\r\n        const value2 = flattenedValue[key2];\r\n\r\n        if (key2.startsWith(\"@\")) {\r\n          responsiveValues[key2] = value2;\r\n        } else {\r\n          nonResponsiveValues[key2] = value2;\r\n        }\r\n      }\r\n\r\n      result[key] = nonResponsiveValues;\r\n\r\n      for (const breakpoint in responsiveValues) {\r\n        if (!result[breakpoint]) {\r\n          result[breakpoint] = {};\r\n        }\r\n\r\n        result[breakpoint] = {\r\n          ...result[breakpoint],\r\n          [key]: responsiveValues[breakpoint],\r\n        };\r\n      }\r\n    } else {\r\n      result[key] = value;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n"],"names":["flattenResponsiveStyles","styles","result","key","value","startsWith","flattenedValue","nonResponsiveValues","responsiveValues","key2","value2","breakpoint"],"mappings":";;;;;AAAA;AACA;AACA;AACA;;AAEO,SAASA,uBAAuBA,CACrCC,MAA2B,EACN;EACrB,MAAMC,MAA2B,GAAG,EAAE,CAAA;AAEtC,EAAA,KAAK,MAAMC,GAAG,IAAIF,MAAM,EAAE;AACxB,IAAA,MAAMG,KAAK,GAAGH,MAAM,CAACE,GAAG,CAAC,CAAA;AAEzB,IAAA,IAAIA,GAAG,CAACE,UAAU,CAAC,GAAG,CAAC,EAAE;AACvB,MAAA,IAAI,CAACH,MAAM,CAACC,GAAG,CAAC,EAAE;AAChBD,QAAAA,MAAM,CAACC,GAAG,CAAC,GAAG,EAAE,CAAA;AAClB,OAAA;MAEAD,MAAM,CAACC,GAAG,CAAC,GAAG;QAAE,GAAGD,MAAM,CAACC,GAAG,CAAC;QAAE,GAAGC,KAAAA;OAAO,CAAA;AAC1C,MAAA,SAAA;AACF,KAAA;IAEA,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;AAC/C,MAAA,MAAME,cAAc,GAAGN,uBAAuB,CAACI,KAAK,CAAC,CAAA;;AAErD;;MAEA,MAAMG,mBAAwC,GAAG,EAAE,CAAA;MACnD,MAAMC,gBAAqC,GAAG,EAAE,CAAA;AAEhD,MAAA,KAAK,MAAMC,IAAI,IAAIH,cAAc,EAAE;AACjC,QAAA,MAAMI,MAAM,GAAGJ,cAAc,CAACG,IAAI,CAAC,CAAA;AAEnC,QAAA,IAAIA,IAAI,CAACJ,UAAU,CAAC,GAAG,CAAC,EAAE;AACxBG,UAAAA,gBAAgB,CAACC,IAAI,CAAC,GAAGC,MAAM,CAAA;AACjC,SAAC,MAAM;AACLH,UAAAA,mBAAmB,CAACE,IAAI,CAAC,GAAGC,MAAM,CAAA;AACpC,SAAA;AACF,OAAA;AAEAR,MAAAA,MAAM,CAACC,GAAG,CAAC,GAAGI,mBAAmB,CAAA;AAEjC,MAAA,KAAK,MAAMI,UAAU,IAAIH,gBAAgB,EAAE;AACzC,QAAA,IAAI,CAACN,MAAM,CAACS,UAAU,CAAC,EAAE;AACvBT,UAAAA,MAAM,CAACS,UAAU,CAAC,GAAG,EAAE,CAAA;AACzB,SAAA;QAEAT,MAAM,CAACS,UAAU,CAAC,GAAG;UACnB,GAAGT,MAAM,CAACS,UAAU,CAAC;AACrB,UAAA,CAACR,GAAG,GAAGK,gBAAgB,CAACG,UAAU,CAAA;SACnC,CAAA;AACH,OAAA;AACF,KAAC,MAAM;AACLT,MAAAA,MAAM,CAACC,GAAG,CAAC,GAAGC,KAAK,CAAA;AACrB,KAAA;AACF,GAAA;AAEA,EAAA,OAAOF,MAAM,CAAA;AACf;;;;"}