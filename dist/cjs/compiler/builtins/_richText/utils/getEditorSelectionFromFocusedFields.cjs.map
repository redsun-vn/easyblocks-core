{"version":3,"file":"getEditorSelectionFromFocusedFields.cjs","sources":["../../../../../../src/compiler/builtins/$richText/utils/getEditorSelectionFromFocusedFields.ts"],"sourcesContent":["import { dotNotationGet, last } from \"@/utils\";\nimport type { Selection } from \"slate\";\nimport { parseFocusedRichTextPartConfigPath } from \"./parseRichTextPartConfigPath\";\n\nfunction getEditorSelectionFromFocusedFields(\n  focusedFields: Array<string>,\n  form: any\n): Selection {\n  try {\n    const anchorFocusedField = focusedFields[0];\n    const focusFocusedField = last(focusedFields);\n    const parsedAnchorField =\n      parseFocusedRichTextPartConfigPath(anchorFocusedField);\n    const parsedFocusedField =\n      parseFocusedRichTextPartConfigPath(focusFocusedField);\n\n    if (!parsedAnchorField.path.length || !parsedFocusedField.path.length) {\n      return null;\n    }\n\n    return {\n      anchor: {\n        offset: parsedAnchorField.range ? parsedAnchorField.range[0] : 0,\n        path: parsedAnchorField.path,\n      },\n      focus: {\n        offset: parsedFocusedField.range\n          ? parsedFocusedField.range[1]\n          : dotNotationGet(form.values, focusFocusedField).value.length,\n        path: parsedFocusedField.path,\n      },\n    };\n  } catch (error) {\n    console.log(error);\n\n    return null;\n  }\n}\n\nexport { getEditorSelectionFromFocusedFields };\n"],"names":["getEditorSelectionFromFocusedFields","focusedFields","form","anchorFocusedField","focusFocusedField","last","parsedAnchorField","parseFocusedRichTextPartConfigPath","parsedFocusedField","path","length","anchor","offset","range","focus","dotNotationGet","values","value","error","console","log"],"mappings":";;;;;;;;;AAIA,SAASA,mCAAmCA,CAC1CC,aAA4B,EAC5BC,IAAS,EACE;EACX,IAAI;AACF,IAAA,MAAMC,kBAAkB,GAAGF,aAAa,CAAC,CAAC,CAAC,CAAA;AAC3C,IAAA,MAAMG,iBAAiB,GAAGC,SAAI,CAACJ,aAAa,CAAC,CAAA;AAC7C,IAAA,MAAMK,iBAAiB,GACrBC,8DAAkC,CAACJ,kBAAkB,CAAC,CAAA;AACxD,IAAA,MAAMK,kBAAkB,GACtBD,8DAAkC,CAACH,iBAAiB,CAAC,CAAA;AAEvD,IAAA,IAAI,CAACE,iBAAiB,CAACG,IAAI,CAACC,MAAM,IAAI,CAACF,kBAAkB,CAACC,IAAI,CAACC,MAAM,EAAE;AACrE,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;IAEA,OAAO;AACLC,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAEN,iBAAiB,CAACO,KAAK,GAAGP,iBAAiB,CAACO,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;QAChEJ,IAAI,EAAEH,iBAAiB,CAACG,IAAAA;OACzB;AACDK,MAAAA,KAAK,EAAE;QACLF,MAAM,EAAEJ,kBAAkB,CAACK,KAAK,GAC5BL,kBAAkB,CAACK,KAAK,CAAC,CAAC,CAAC,GAC3BE,6BAAc,CAACb,IAAI,CAACc,MAAM,EAAEZ,iBAAiB,CAAC,CAACa,KAAK,CAACP,MAAM;QAC/DD,IAAI,EAAED,kBAAkB,CAACC,IAAAA;AAC3B,OAAA;KACD,CAAA;GACF,CAAC,OAAOS,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAA;AAElB,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;AACF;;;;"}