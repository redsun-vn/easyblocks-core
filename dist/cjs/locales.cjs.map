{"version":3,"file":"locales.cjs","sources":["../../src/locales.ts"],"sourcesContent":["export type Locale = {\n  code: string;\n  name?: string;\n  isDefault?: boolean;\n  fallback?: string;\n  icon?: string;\n};\n\nexport function getDefaultLocale(locales: Locale[]): Locale {\n  const defaultLocale = locales.find((locale) => locale.isDefault);\n\n  if (!defaultLocale) {\n    throw new Error(\"No default locale found\");\n  }\n\n  return defaultLocale;\n}\n\nexport function getFallbackLocaleForLocale(\n  locale: string,\n  locales: Locale[]\n): string | undefined {\n  do {\n    const fallbackId =\n      locales.find((l) => l.code === locale)?.fallback ??\n      getDefaultLocale(locales).code;\n\n    // Default locale, no fallback\n    if (fallbackId === locale) {\n      return;\n    }\n\n    return fallbackId;\n  } while (true);\n}\n\nexport function getFallbackForLocale<T>(\n  translatedValues: { [locale: string]: T | undefined | null },\n  locale: string,\n  locales: Locale[]\n): T | undefined {\n  while (true) {\n    const fallbackLocale = getFallbackLocaleForLocale(locale, locales);\n\n    if (!fallbackLocale) {\n      return;\n    }\n\n    const fallbackValue = translatedValues[fallbackLocale];\n\n    if (fallbackValue !== undefined && fallbackValue !== null) {\n      return fallbackValue;\n    }\n\n    locale = fallbackLocale;\n  }\n}\n"],"names":["getDefaultLocale","locales","defaultLocale","find","locale","isDefault","Error","getFallbackLocaleForLocale","fallbackId","l","code","fallback","getFallbackForLocale","translatedValues","fallbackLocale","fallbackValue","undefined"],"mappings":";;;;;AAQO,SAASA,gBAAgBA,CAACC,OAAiB,EAAU;EAC1D,MAAMC,aAAa,GAAGD,OAAO,CAACE,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACC,SAAS,CAAC,CAAA;EAEhE,IAAI,CAACH,aAAa,EAAE;AAClB,IAAA,MAAM,IAAII,KAAK,CAAC,yBAAyB,CAAC,CAAA;AAC5C,GAAA;AAEA,EAAA,OAAOJ,aAAa,CAAA;AACtB,CAAA;AAEO,SAASK,0BAA0BA,CACxCH,MAAc,EACdH,OAAiB,EACG;EACpB,GAAG;IACD,MAAMO,UAAU,GACdP,OAAO,CAACE,IAAI,CAAEM,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKN,MAAM,CAAC,EAAEO,QAAQ,IAChDX,gBAAgB,CAACC,OAAO,CAAC,CAACS,IAAI,CAAA;;AAEhC;IACA,IAAIF,UAAU,KAAKJ,MAAM,EAAE;AACzB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,OAAOI,UAAU,CAAA;AACnB,GAAC,QAAQ,IAAI,EAAA;AACf,CAAA;AAEO,SAASI,oBAAoBA,CAClCC,gBAA4D,EAC5DT,MAAc,EACdH,OAAiB,EACF;AACf,EAAA,OAAO,IAAI,EAAE;AACX,IAAA,MAAMa,cAAc,GAAGP,0BAA0B,CAACH,MAAM,EAAEH,OAAO,CAAC,CAAA;IAElE,IAAI,CAACa,cAAc,EAAE;AACnB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,MAAMC,aAAa,GAAGF,gBAAgB,CAACC,cAAc,CAAC,CAAA;AAEtD,IAAA,IAAIC,aAAa,KAAKC,SAAS,IAAID,aAAa,KAAK,IAAI,EAAE;AACzD,MAAA,OAAOA,aAAa,CAAA;AACtB,KAAA;AAEAX,IAAAA,MAAM,GAAGU,cAAc,CAAA;AACzB,GAAA;AACF;;;;;;"}