{"version":3,"file":"checkers.js","sources":["../../src/checkers.ts"],"sourcesContent":["import { z } from \"zod\";\r\nimport { isCompiledComponentConfig } from \"./isCompiledComponentConfig\";\r\nimport {\r\n  RenderableContent,\r\n  NonEmptyRenderableContent,\r\n  EmptyRenderableContent,\r\n  Document,\r\n  NoCodeComponentEntry,\r\n  LocalValue,\r\n  ExternalData,\r\n  ExternalDataCompoundResourceResolvedResult,\r\n  ExternalReference,\r\n  ExternalReferenceEmpty,\r\n} from \"./types\";\r\n\r\nfunction isRenderableContent(input: unknown): input is RenderableContent {\r\n  return (\r\n    typeof input === \"object\" &&\r\n    input !== null &&\r\n    \"renderableContent\" in input &&\r\n    (isCompiledComponentConfig(\r\n      (input as { renderableContent: unknown }).renderableContent\r\n    ) ||\r\n      (input as { renderableContent: unknown }).renderableContent === null)\r\n  );\r\n}\r\n\r\nfunction isNonEmptyRenderableContent(\r\n  input: unknown\r\n): input is NonEmptyRenderableContent {\r\n  return (\r\n    typeof input === \"object\" &&\r\n    input !== null &&\r\n    \"renderableContent\" in input &&\r\n    isCompiledComponentConfig(\r\n      (input as { renderableContent: unknown }).renderableContent\r\n    )\r\n  );\r\n}\r\n\r\nfunction isEmptyRenderableContent(\r\n  input: unknown\r\n): input is EmptyRenderableContent {\r\n  return (\r\n    typeof input === \"object\" &&\r\n    input !== null &&\r\n    \"renderableContent\" in input &&\r\n    (input as { renderableContent: unknown }).renderableContent === null\r\n  );\r\n}\r\n\r\nconst documentSchema = z.object({\r\n  documentId: z.string(),\r\n  projectId: z.string(),\r\n  rootContainer: z.string().optional(),\r\n  preview: z.object({}).optional(),\r\n  config: z.optional(z.object({})),\r\n});\r\n\r\nfunction isDocument(value: unknown): value is Document {\r\n  return documentSchema.safeParse(value).success;\r\n}\r\n\r\nfunction isComponentConfig(value: any): value is NoCodeComponentEntry {\r\n  return (\r\n    typeof value === \"object\" &&\r\n    typeof value?._component === \"string\" &&\r\n    typeof value?._id === \"string\"\r\n  );\r\n}\r\n\r\nconst localValueSchema = z.object({\r\n  value: z.any(),\r\n  widgetId: z.string(),\r\n});\r\n\r\nfunction isLocalValue(value: any): value is LocalValue {\r\n  return localValueSchema.safeParse(value).success;\r\n}\r\n\r\nexport function isResolvedCompoundExternalDataValue(\r\n  value: ExternalData[string]\r\n): value is ExternalDataCompoundResourceResolvedResult {\r\n  return \"type\" in value && value.type === \"object\" && \"value\" in value;\r\n}\r\n\r\nexport function isIdReferenceToDocumentExternalValue(\r\n  id: NonNullable<ExternalReference[\"id\"]>\r\n) {\r\n  return typeof id === \"string\" && id.startsWith(\"$.\");\r\n}\r\n\r\nexport function isEmptyExternalReference(\r\n  externalDataConfigEntry: ExternalReference\r\n): externalDataConfigEntry is ExternalReferenceEmpty {\r\n  return externalDataConfigEntry.id === null;\r\n}\r\n\r\nexport {\r\n  isRenderableContent,\r\n  isNonEmptyRenderableContent,\r\n  isEmptyRenderableContent,\r\n  isDocument,\r\n  isComponentConfig,\r\n  isLocalValue,\r\n};\r\n"],"names":["isRenderableContent","input","isCompiledComponentConfig","renderableContent","isNonEmptyRenderableContent","isEmptyRenderableContent","documentSchema","z","object","documentId","string","projectId","rootContainer","optional","preview","config","isDocument","value","safeParse","success","isComponentConfig","_component","_id","localValueSchema","any","widgetId","isLocalValue","isResolvedCompoundExternalDataValue","type","isIdReferenceToDocumentExternalValue","id","startsWith","isEmptyExternalReference","externalDataConfigEntry"],"mappings":";;;;AAeA,SAASA,mBAAmBA,CAACC,KAAc,EAA8B;EACvE,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,KAC3BC,yBAAyB,CACvBD,KAAK,CAAoCE,iBAC5C,CAAC,IACEF,KAAK,CAAoCE,iBAAiB,KAAK,IAAI,CAAC,CAAA;AAE3E,CAAA;AAEA,SAASC,2BAA2BA,CAClCH,KAAc,EACsB;AACpC,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,IAC5BC,yBAAyB,CACtBD,KAAK,CAAoCE,iBAC5C,CAAC,CAAA;AAEL,CAAA;AAEA,SAASE,wBAAwBA,CAC/BJ,KAAc,EACmB;AACjC,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,IAC3BA,KAAK,CAAoCE,iBAAiB,KAAK,IAAI,CAAA;AAExE,CAAA;AAEA,MAAMG,cAAc,GAAGC,CAAC,CAACC,MAAM,CAAC;AAC9BC,EAAAA,UAAU,EAAEF,CAAC,CAACG,MAAM,EAAE;AACtBC,EAAAA,SAAS,EAAEJ,CAAC,CAACG,MAAM,EAAE;EACrBE,aAAa,EAAEL,CAAC,CAACG,MAAM,EAAE,CAACG,QAAQ,EAAE;EACpCC,OAAO,EAAEP,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,CAACK,QAAQ,EAAE;EAChCE,MAAM,EAAER,CAAC,CAACM,QAAQ,CAACN,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,CAAA;AACjC,CAAC,CAAC,CAAA;AAEF,SAASQ,UAAUA,CAACC,KAAc,EAAqB;AACrD,EAAA,OAAOX,cAAc,CAACY,SAAS,CAACD,KAAK,CAAC,CAACE,OAAO,CAAA;AAChD,CAAA;AAEA,SAASC,iBAAiBA,CAACH,KAAU,EAAiC;AACpE,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzB,OAAOA,KAAK,EAAEI,UAAU,KAAK,QAAQ,IACrC,OAAOJ,KAAK,EAAEK,GAAG,KAAK,QAAQ,CAAA;AAElC,CAAA;AAEA,MAAMC,gBAAgB,GAAGhB,CAAC,CAACC,MAAM,CAAC;AAChCS,EAAAA,KAAK,EAAEV,CAAC,CAACiB,GAAG,EAAE;AACdC,EAAAA,QAAQ,EAAElB,CAAC,CAACG,MAAM,EAAC;AACrB,CAAC,CAAC,CAAA;AAEF,SAASgB,YAAYA,CAACT,KAAU,EAAuB;AACrD,EAAA,OAAOM,gBAAgB,CAACL,SAAS,CAACD,KAAK,CAAC,CAACE,OAAO,CAAA;AAClD,CAAA;AAEO,SAASQ,mCAAmCA,CACjDV,KAA2B,EAC0B;AACrD,EAAA,OAAO,MAAM,IAAIA,KAAK,IAAIA,KAAK,CAACW,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAIX,KAAK,CAAA;AACvE,CAAA;AAEO,SAASY,oCAAoCA,CAClDC,EAAwC,EACxC;EACA,OAAO,OAAOA,EAAE,KAAK,QAAQ,IAAIA,EAAE,CAACC,UAAU,CAAC,IAAI,CAAC,CAAA;AACtD,CAAA;AAEO,SAASC,wBAAwBA,CACtCC,uBAA0C,EACS;AACnD,EAAA,OAAOA,uBAAuB,CAACH,EAAE,KAAK,IAAI,CAAA;AAC5C;;;;"}