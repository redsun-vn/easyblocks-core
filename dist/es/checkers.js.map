{"version":3,"file":"checkers.js","sources":["../../src/checkers.ts"],"sourcesContent":["import { z } from \"zod\";\nimport { isCompiledComponentConfig } from \"./isCompiledComponentConfig\";\nimport {\n  RenderableContent,\n  NonEmptyRenderableContent,\n  EmptyRenderableContent,\n  Document,\n  NoCodeComponentEntry,\n  LocalValue,\n  ExternalData,\n  ExternalDataCompoundResourceResolvedResult,\n  ExternalReference,\n  ExternalReferenceEmpty,\n} from \"./types\";\n\nfunction isRenderableContent(input: unknown): input is RenderableContent {\n  return (\n    typeof input === \"object\" &&\n    input !== null &&\n    \"renderableContent\" in input &&\n    (isCompiledComponentConfig(\n      (input as { renderableContent: unknown }).renderableContent\n    ) ||\n      (input as { renderableContent: unknown }).renderableContent === null)\n  );\n}\n\nfunction isNonEmptyRenderableContent(\n  input: unknown\n): input is NonEmptyRenderableContent {\n  return (\n    typeof input === \"object\" &&\n    input !== null &&\n    \"renderableContent\" in input &&\n    isCompiledComponentConfig(\n      (input as { renderableContent: unknown }).renderableContent\n    )\n  );\n}\n\nfunction isEmptyRenderableContent(\n  input: unknown\n): input is EmptyRenderableContent {\n  return (\n    typeof input === \"object\" &&\n    input !== null &&\n    \"renderableContent\" in input &&\n    (input as { renderableContent: unknown }).renderableContent === null\n  );\n}\n\nconst documentSchema = z.object({\n  documentId: z.string(),\n  projectId: z.string(),\n  rootContainer: z.string().optional(),\n  preview: z.object({}).optional(),\n  config: z.optional(z.object({})),\n});\n\nfunction isDocument(value: unknown): value is Document {\n  return documentSchema.safeParse(value).success;\n}\n\nfunction isComponentConfig(value: any): value is NoCodeComponentEntry {\n  return (\n    typeof value === \"object\" &&\n    typeof value?._component === \"string\" &&\n    typeof value?._id === \"string\"\n  );\n}\n\nconst localValueSchema = z.object({\n  value: z.any(),\n  widgetId: z.string(),\n});\n\nfunction isLocalValue(value: any): value is LocalValue {\n  return localValueSchema.safeParse(value).success;\n}\n\nexport function isResolvedCompoundExternalDataValue(\n  value: ExternalData[string]\n): value is ExternalDataCompoundResourceResolvedResult {\n  return \"type\" in value && value.type === \"object\" && \"value\" in value;\n}\n\nexport function isIdReferenceToDocumentExternalValue(\n  id: NonNullable<ExternalReference[\"id\"]>\n) {\n  return typeof id === \"string\" && id.startsWith(\"$.\");\n}\n\nexport function isEmptyExternalReference(\n  externalDataConfigEntry: ExternalReference\n): externalDataConfigEntry is ExternalReferenceEmpty {\n  return externalDataConfigEntry.id === null;\n}\n\nexport {\n  isRenderableContent,\n  isNonEmptyRenderableContent,\n  isEmptyRenderableContent,\n  isDocument,\n  isComponentConfig,\n  isLocalValue,\n};\n"],"names":["isRenderableContent","input","isCompiledComponentConfig","renderableContent","isNonEmptyRenderableContent","isEmptyRenderableContent","documentSchema","z","object","documentId","string","projectId","rootContainer","optional","preview","config","isDocument","value","safeParse","success","isComponentConfig","_component","_id","localValueSchema","any","widgetId","isLocalValue","isResolvedCompoundExternalDataValue","type","isIdReferenceToDocumentExternalValue","id","startsWith","isEmptyExternalReference","externalDataConfigEntry"],"mappings":";;;;AAeA,SAASA,mBAAmBA,CAACC,KAAc,EAA8B;EACvE,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,KAC3BC,yBAAyB,CACvBD,KAAK,CAAoCE,iBAC5C,CAAC,IACEF,KAAK,CAAoCE,iBAAiB,KAAK,IAAI,CAAC,CAAA;AAE3E,CAAA;AAEA,SAASC,2BAA2BA,CAClCH,KAAc,EACsB;AACpC,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,IAC5BC,yBAAyB,CACtBD,KAAK,CAAoCE,iBAC5C,CAAC,CAAA;AAEL,CAAA;AAEA,SAASE,wBAAwBA,CAC/BJ,KAAc,EACmB;AACjC,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzBA,KAAK,KAAK,IAAI,IACd,mBAAmB,IAAIA,KAAK,IAC3BA,KAAK,CAAoCE,iBAAiB,KAAK,IAAI,CAAA;AAExE,CAAA;AAEA,MAAMG,cAAc,GAAGC,CAAC,CAACC,MAAM,CAAC;AAC9BC,EAAAA,UAAU,EAAEF,CAAC,CAACG,MAAM,EAAE;AACtBC,EAAAA,SAAS,EAAEJ,CAAC,CAACG,MAAM,EAAE;EACrBE,aAAa,EAAEL,CAAC,CAACG,MAAM,EAAE,CAACG,QAAQ,EAAE;EACpCC,OAAO,EAAEP,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,CAACK,QAAQ,EAAE;EAChCE,MAAM,EAAER,CAAC,CAACM,QAAQ,CAACN,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,CAAA;AACjC,CAAC,CAAC,CAAA;AAEF,SAASQ,UAAUA,CAACC,KAAc,EAAqB;AACrD,EAAA,OAAOX,cAAc,CAACY,SAAS,CAACD,KAAK,CAAC,CAACE,OAAO,CAAA;AAChD,CAAA;AAEA,SAASC,iBAAiBA,CAACH,KAAU,EAAiC;AACpE,EAAA,OACE,OAAOA,KAAK,KAAK,QAAQ,IACzB,OAAOA,KAAK,EAAEI,UAAU,KAAK,QAAQ,IACrC,OAAOJ,KAAK,EAAEK,GAAG,KAAK,QAAQ,CAAA;AAElC,CAAA;AAEA,MAAMC,gBAAgB,GAAGhB,CAAC,CAACC,MAAM,CAAC;AAChCS,EAAAA,KAAK,EAAEV,CAAC,CAACiB,GAAG,EAAE;AACdC,EAAAA,QAAQ,EAAElB,CAAC,CAACG,MAAM,EAAC;AACrB,CAAC,CAAC,CAAA;AAEF,SAASgB,YAAYA,CAACT,KAAU,EAAuB;AACrD,EAAA,OAAOM,gBAAgB,CAACL,SAAS,CAACD,KAAK,CAAC,CAACE,OAAO,CAAA;AAClD,CAAA;AAEO,SAASQ,mCAAmCA,CACjDV,KAA2B,EAC0B;AACrD,EAAA,OAAO,MAAM,IAAIA,KAAK,IAAIA,KAAK,CAACW,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAIX,KAAK,CAAA;AACvE,CAAA;AAEO,SAASY,oCAAoCA,CAClDC,EAAwC,EACxC;EACA,OAAO,OAAOA,EAAE,KAAK,QAAQ,IAAIA,EAAE,CAACC,UAAU,CAAC,IAAI,CAAC,CAAA;AACtD,CAAA;AAEO,SAASC,wBAAwBA,CACtCC,uBAA0C,EACS;AACnD,EAAA,OAAOA,uBAAuB,CAACH,EAAE,KAAK,IAAI,CAAA;AAC5C;;;;"}