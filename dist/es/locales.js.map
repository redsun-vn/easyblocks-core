{"version":3,"file":"locales.js","sources":["../../src/locales.ts"],"sourcesContent":["export type Locale = {\r\n  code: string;\r\n  isDefault?: boolean;\r\n  fallback?: string;\r\n};\r\n\r\nexport function getDefaultLocale(locales: Locale[]): Locale {\r\n  const defaultLocale = locales.find((locale) => locale.isDefault);\r\n\r\n  if (!defaultLocale) {\r\n    throw new Error(\"No default locale found\");\r\n  }\r\n\r\n  return defaultLocale;\r\n}\r\n\r\nexport function getFallbackLocaleForLocale(\r\n  locale: string,\r\n  locales: Locale[]\r\n): string | undefined {\r\n  do {\r\n    const fallbackId =\r\n      locales.find((l) => l.code === locale)?.fallback ??\r\n      getDefaultLocale(locales).code;\r\n\r\n    // Default locale, no fallback\r\n    if (fallbackId === locale) {\r\n      return;\r\n    }\r\n\r\n    return fallbackId;\r\n  } while (true);\r\n}\r\n\r\nexport function getFallbackForLocale<T>(\r\n  translatedValues: { [locale: string]: T | undefined | null },\r\n  locale: string,\r\n  locales: Locale[]\r\n): T | undefined {\r\n  while (true) {\r\n    const fallbackLocale = getFallbackLocaleForLocale(locale, locales);\r\n\r\n    if (!fallbackLocale) {\r\n      return;\r\n    }\r\n\r\n    const fallbackValue = translatedValues[fallbackLocale];\r\n\r\n    if (fallbackValue !== undefined && fallbackValue !== null) {\r\n      return fallbackValue;\r\n    }\r\n\r\n    locale = fallbackLocale;\r\n  }\r\n}\r\n"],"names":["getDefaultLocale","locales","defaultLocale","find","locale","isDefault","Error","getFallbackLocaleForLocale","fallbackId","l","code","fallback","getFallbackForLocale","translatedValues","fallbackLocale","fallbackValue","undefined"],"mappings":";AAMO,SAASA,gBAAgBA,CAACC,OAAiB,EAAU;EAC1D,MAAMC,aAAa,GAAGD,OAAO,CAACE,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACC,SAAS,CAAC,CAAA;EAEhE,IAAI,CAACH,aAAa,EAAE;AAClB,IAAA,MAAM,IAAII,KAAK,CAAC,yBAAyB,CAAC,CAAA;AAC5C,GAAA;AAEA,EAAA,OAAOJ,aAAa,CAAA;AACtB,CAAA;AAEO,SAASK,0BAA0BA,CACxCH,MAAc,EACdH,OAAiB,EACG;EACpB,GAAG;IACD,MAAMO,UAAU,GACdP,OAAO,CAACE,IAAI,CAAEM,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKN,MAAM,CAAC,EAAEO,QAAQ,IAChDX,gBAAgB,CAACC,OAAO,CAAC,CAACS,IAAI,CAAA;;AAEhC;IACA,IAAIF,UAAU,KAAKJ,MAAM,EAAE;AACzB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,OAAOI,UAAU,CAAA;AACnB,GAAC,QAAQ,IAAI,EAAA;AACf,CAAA;AAEO,SAASI,oBAAoBA,CAClCC,gBAA4D,EAC5DT,MAAc,EACdH,OAAiB,EACF;AACf,EAAA,OAAO,IAAI,EAAE;AACX,IAAA,MAAMa,cAAc,GAAGP,0BAA0B,CAACH,MAAM,EAAEH,OAAO,CAAC,CAAA;IAElE,IAAI,CAACa,cAAc,EAAE;AACnB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,MAAMC,aAAa,GAAGF,gBAAgB,CAACC,cAAc,CAAC,CAAA;AAEtD,IAAA,IAAIC,aAAa,KAAKC,SAAS,IAAID,aAAa,KAAK,IAAI,EAAE;AACzD,MAAA,OAAOA,aAAa,CAAA;AACtB,KAAA;AAEAX,IAAAA,MAAM,GAAGU,cAAc,CAAA;AACzB,GAAA;AACF;;;;"}