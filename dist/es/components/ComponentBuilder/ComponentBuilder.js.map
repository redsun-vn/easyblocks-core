{"version":3,"file":"ComponentBuilder.js","sources":["../../../../src/components/ComponentBuilder/ComponentBuilder.tsx"],"sourcesContent":["import React, { ComponentType, Fragment, ReactElement } from \"react\";\nimport { findComponentDefinitionById } from \"../../compiler/findComponentDefinition\";\nimport {\n  isSchemaPropComponent,\n  isSchemaPropComponentOrComponentCollection,\n} from \"../../compiler/schema\";\nimport {\n  ContextProps,\n  InternalComponentDefinition,\n} from \"../../compiler/types\";\nimport {\n  ComponentPickerClosedEvent,\n  componentPickerOpened,\n  itemInserted,\n} from \"../../events\";\nimport {\n  getResolvedExternalDataValue,\n  isLocalTextReference,\n  resolveExternalValue,\n} from \"../../resourcesUtils\";\nimport {\n  isTrulyResponsiveValue,\n  responsiveValueGetDefinedValue,\n  responsiveValueReduce,\n  responsiveValueValues,\n} from \"../../responsiveness\";\nimport { resop } from \"../../responsiveness/resop\";\nimport {\n  CompilationMetadata,\n  CompiledComponentConfig,\n  CompiledLocalTextReference,\n  CompiledShopstoryComponentConfig,\n  ComponentCollectionLocalisedSchemaProp,\n  ComponentCollectionSchemaProp,\n  ComponentSchemaProp,\n  Devices,\n  ExternalData,\n  ExternalReference,\n  ExternalSchemaProp,\n  LocalReference,\n  LocalTextReference,\n  NoCodeComponentProps,\n  ResponsiveValue,\n} from \"../../types\";\nimport { Box } from \"../Box/Box\";\nimport { useEasyblocksExternalData } from \"../EasyblocksExternalDataProvider\";\nimport { useEasyblocksMetadata } from \"../EasyblocksMetadataProvider\";\n\nfunction buildBoxes(\n  compiled: any,\n  name: string,\n  actionWrappers: { [key: string]: any },\n  meta: any\n): any {\n  if (Array.isArray(compiled)) {\n    return compiled.map((x: any, index: number) =>\n      buildBoxes(x, `${name}.${index}`, actionWrappers, meta)\n    );\n  } else if (typeof compiled === \"object\" && compiled !== null) {\n    if (compiled.__isBox) {\n      const boxProps = {\n        __compiled: compiled,\n        __name: name,\n        devices: meta.vars.devices,\n        stitches: meta.stitches,\n      };\n\n      return <Box {...boxProps} />;\n    }\n\n    const ret: Record<string, any> = {};\n\n    for (const key in compiled) {\n      ret[key] = buildBoxes(compiled[key], key, actionWrappers, meta);\n    }\n    return ret;\n  }\n  return compiled;\n}\n\nfunction getComponentDefinition(\n  compiled: CompiledComponentConfig,\n  runtimeContext: any\n) {\n  return findComponentDefinitionById(compiled._component, runtimeContext);\n}\n\n/**\n * Checks whether:\n * 1. component is renderable (if all non-optional externals are defined)\n * 2. is data loading...\n * 3. gets fields that are not defined\n *\n * @param compiled\n * @param runtimeContext\n * @param rendererContext\n */\n\ntype RenderabilityStatus = {\n  renderable: boolean;\n  isLoading: boolean;\n  fieldsRequiredToRender: Set<string>;\n};\n\nfunction getRenderabilityStatus(\n  compiled: CompiledComponentConfig,\n  meta: CompilationMetadata,\n  externalData: ExternalData\n): RenderabilityStatus {\n  const status: RenderabilityStatus = {\n    renderable: true,\n    isLoading: false,\n    fieldsRequiredToRender: new Set<string>(),\n  };\n\n  const componentDefinition = getComponentDefinition(compiled, {\n    definitions: meta.vars.definitions,\n  });\n\n  if (!componentDefinition) {\n    return {\n      renderable: false,\n      isLoading: false,\n      fieldsRequiredToRender: new Set<string>(),\n    };\n  }\n\n  const requiredExternalFields = componentDefinition.schema.filter(\n    (schemaProp): schemaProp is ExternalSchemaProp => {\n      if (schemaProp.type === \"text\") {\n        return false;\n      }\n\n      const propValue = compiled.props[schemaProp.prop];\n\n      if (\n        typeof propValue === \"object\" &&\n        propValue !== null &&\n        \"id\" in propValue &&\n        \"widgetId\" in propValue\n      ) {\n        if (\"optional\" in schemaProp) {\n          return !schemaProp.optional;\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  );\n\n  if (requiredExternalFields.length === 0) {\n    return status;\n  }\n\n  for (const resourceSchemaProp of requiredExternalFields) {\n    const externalReference: ResponsiveValue<ExternalReference> =\n      compiled.props[resourceSchemaProp.prop];\n\n    const fieldStatus = getFieldStatus(\n      externalReference,\n      externalData,\n      compiled._id,\n      resourceSchemaProp.prop,\n      meta.vars.devices\n    );\n\n    status.isLoading = status.isLoading || fieldStatus.isLoading;\n    status.renderable = status.renderable && fieldStatus.renderable;\n\n    if (!fieldStatus.renderable && !fieldStatus.isLoading) {\n      status.fieldsRequiredToRender.add(\n        resourceSchemaProp.label || resourceSchemaProp.prop\n      );\n    }\n  }\n\n  return status;\n}\n\nfunction getCompiledSubcomponents(\n  id: string,\n  compiledArray: (CompiledComponentConfig | ReactElement)[],\n  contextProps: ContextProps,\n  schemaProp:\n    | ComponentSchemaProp\n    | ComponentCollectionSchemaProp\n    | ComponentCollectionLocalisedSchemaProp,\n  path: string,\n  meta: CompilationMetadata,\n  isEditing: boolean,\n  components: ComponentBuilderProps[\"components\"]\n) {\n  const originalPath = path;\n\n  if (schemaProp.type === \"component-collection-localised\") {\n    path = path + \".\" + meta.vars.locale;\n  }\n\n  if (schemaProp.noInline) {\n    const elements = compiledArray.map((compiledChild, index) =>\n      \"_component\" in compiledChild ? (\n        <ComponentBuilder\n          path={`${path}.${index}`}\n          compiled={compiledChild}\n          components={components}\n        />\n      ) : (\n        compiledChild\n      )\n    );\n\n    if (isSchemaPropComponent(schemaProp)) {\n      return elements[0];\n    } else {\n      return elements;\n    }\n  }\n\n  const EditableComponentBuilder = isEditing\n    ? components[\"EditableComponentBuilder.editor\"]\n    : components[\"EditableComponentBuilder.client\"];\n\n  let elements = compiledArray.map((compiledChild, index) =>\n    \"_component\" in compiledChild ? (\n      <EditableComponentBuilder\n        compiled={compiledChild}\n        index={index}\n        length={compiledArray.length}\n        path={`${path}.${index}`}\n        components={components}\n      />\n    ) : (\n      compiledChild\n    )\n  );\n\n  const Placeholder = components[\"Placeholder\"];\n\n  // TODO: this code should be editor-only\n  if (\n    isEditing &&\n    Placeholder &&\n    elements.length === 0 &&\n    !contextProps.noInline &&\n    // We don't want to show add button for this type\n    schemaProp.type !== \"component-collection-localised\"\n  ) {\n    const type = getComponentMainType(schemaProp.accepts);\n\n    elements = [\n      <Placeholder\n        id={id}\n        path={path}\n        type={type}\n        appearance={(schemaProp as ComponentSchemaProp).placeholderAppearance}\n        onClick={() => {\n          function handleComponentPickerCloseMessage(\n            event: ComponentPickerClosedEvent\n          ) {\n            if (\n              event.data.type === \"@easyblocks-editor/component-picker-closed\"\n            ) {\n              window.removeEventListener(\n                \"message\",\n                handleComponentPickerCloseMessage\n              );\n\n              if (event.data.payload.config) {\n                window.parent.postMessage(\n                  itemInserted({\n                    name: path,\n                    index: 0,\n                    block: event.data.payload.config,\n                  })\n                );\n              }\n            }\n          }\n\n          window.addEventListener(\"message\", handleComponentPickerCloseMessage);\n\n          window.parent.postMessage(componentPickerOpened(originalPath));\n        }}\n        meta={meta}\n      />,\n    ];\n  }\n\n  if (isSchemaPropComponent(schemaProp)) {\n    return elements[0] ?? <Fragment></Fragment>;\n  } else {\n    return elements;\n  }\n}\nexport type ComponentBuilderProps = {\n  path: string;\n  passedProps?: {\n    [key: string]: any; // any extra props passed in components\n  };\n  compiled: CompiledComponentConfig;\n  components: {\n    \"@easyblocks/missing-component\": ComponentType<any>;\n    \"@easyblocks/rich-text.client\": ComponentType<any>;\n    \"@easyblocks/rich-text-block-element\": ComponentType<any>;\n    \"@easyblocks/rich-text-line-element\": ComponentType<any>;\n    \"@easyblocks/rich-text-part\": ComponentType<any>;\n    \"@easyblocks/text.client\": ComponentType<any>;\n    \"EditableComponentBuilder.client\": ComponentType<any>;\n    [key: string]: ComponentType<any>;\n  };\n};\n\nexport type InternalNoCodeComponentProps = NoCodeComponentProps & {\n  __easyblocks: {\n    path: string;\n    runtime: any;\n  };\n};\n\nfunction ComponentBuilder(props: ComponentBuilderProps): ReactElement | null {\n  const { compiled, passedProps, path, components, ...restProps } = props;\n\n  const allPassedProps: Record<string, any> = {\n    ...passedProps,\n    ...restProps,\n  };\n\n  const meta = useEasyblocksMetadata();\n  const externalData = useEasyblocksExternalData();\n\n  /**\n   * Component is build in editing mode only if compiled.__editing is set.\n   * This is the result of compilation.\n   * The only case when compiled.__editing is set is when we're in Editor and for non-nested components.\n   */\n  const isEditing = compiled.__editing !== undefined;\n  const pathSeparator = path === \"\" ? \"\" : \".\";\n\n  // Here we know we must render just component, without any wrappers\n  const componentDefinition = getComponentDefinition(compiled, {\n    definitions: meta.vars.definitions,\n  })!;\n\n  const component = getComponent(componentDefinition, components, isEditing);\n  const isMissingComponent =\n    compiled._component === \"@easyblocks/missing-component\";\n  const isMissingInstance = component === undefined;\n  const isMissing = isMissingComponent || isMissingInstance;\n  const MissingComponent = components[\"@easyblocks/missing-component\"];\n\n  if (isMissing) {\n    if (!isEditing) {\n      return null;\n    }\n\n    if (isMissingComponent) {\n      return <MissingComponent error={true}>Missing</MissingComponent>;\n    } else {\n      console.warn(`Missing \"${compiled._component}\"`);\n\n      return (\n        <MissingComponent component={componentDefinition} error={true}>\n          Missing\n        </MissingComponent>\n      );\n    }\n  }\n\n  const Component = component;\n\n  const renderabilityStatus = getRenderabilityStatus(\n    compiled,\n    meta,\n    externalData\n  );\n\n  // if (!renderabilityStatus.renderable) {\n  //   const fieldsRequiredToRender = Array.from(\n  //     renderabilityStatus.fieldsRequiredToRender\n  //   );\n\n  //   return (\n  //     <MissingComponent component={componentDefinition}>\n  //       {`Fill following fields to render the component: ${fieldsRequiredToRender.join(\n  //         \", \"\n  //       )}`}\n\n  //       {renderabilityStatus.isLoading && (\n  //         <Fragment>\n  //           <br />\n  //           <br />\n  //           Loading data...\n  //         </Fragment>\n  //       )}\n  //     </MissingComponent>\n  //   );\n  // }\n\n  const shopstoryCompiledConfig = compiled as CompiledShopstoryComponentConfig;\n\n  // Shopstory component\n  const styled: { [key: string]: any } = buildBoxes(\n    shopstoryCompiledConfig.styled,\n    \"\",\n    {},\n    meta\n  );\n\n  // Styled\n  componentDefinition.schema.forEach((schemaProp) => {\n    if (isSchemaPropComponentOrComponentCollection(schemaProp)) {\n      const contextProps =\n        shopstoryCompiledConfig.__editing?.components?.[schemaProp.prop] || {};\n\n      const compiledChildren =\n        shopstoryCompiledConfig.components[schemaProp.prop];\n\n      styled[schemaProp.prop] = getCompiledSubcomponents(\n        compiled._id,\n        compiledChildren,\n        contextProps,\n        schemaProp,\n        `${path}${pathSeparator}${schemaProp.prop}`,\n        meta,\n        isEditing,\n        components\n      );\n    }\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { ref, __isSelected, ...restPassedProps } = allPassedProps || {};\n\n  const runtime = {\n    stitches: meta.stitches,\n    resop: resop,\n    devices: meta.vars.devices,\n  };\n\n  const easyblocksProp: InternalNoCodeComponentProps[\"__easyblocks\"] = {\n    id: shopstoryCompiledConfig._id,\n    isEditing,\n    path,\n    runtime,\n    isSelected: __isSelected,\n  };\n\n  const componentProps = {\n    ...restPassedProps,\n    ...mapExternalProps(\n      shopstoryCompiledConfig.props,\n      shopstoryCompiledConfig._id,\n      componentDefinition,\n      externalData\n    ),\n    ...styled,\n    __easyblocks: easyblocksProp,\n  };\n\n  return <Component {...componentProps} />;\n}\n\nfunction getComponent(\n  componentDefinition: InternalComponentDefinition,\n  components: ComponentBuilderProps[\"components\"],\n  isEditing: boolean\n) {\n  let component: any;\n\n  // We first try to find editor version of that component\n  if (isEditing) {\n    component = components[componentDefinition.id + \".editor\"];\n  }\n\n  // If it still missing, we try to find client version of that component\n  if (!component) {\n    component = components[componentDefinition.id + \".client\"];\n  }\n\n  if (!component) {\n    // In most cases we're going to pick component by its id\n    component = components[componentDefinition.id];\n  }\n\n  return component;\n}\n\nfunction mapExternalProps(\n  props: Record<string, unknown>,\n  configId: string,\n  componentDefinition: InternalComponentDefinition,\n  externalData: ExternalData\n) {\n  const resultsProps: Record<string, unknown> = {};\n\n  for (const propName in props) {\n    const schemaProp = componentDefinition.schema.find(\n      (currentSchema) => currentSchema.prop === propName\n    );\n\n    if (schemaProp) {\n      const propValue = props[propName] as ResponsiveValue<\n        LocalReference | ExternalReference\n      >;\n\n      if (\n        schemaProp.type === \"text\" &&\n        isLocalTextReference(propValue as LocalTextReference, \"text\")\n      ) {\n        resultsProps[propName] = (\n          propValue as unknown as CompiledLocalTextReference\n        ).value;\n      } else if (\n        // FIXME: this is a mess\n        (!isTrulyResponsiveValue(propValue) &&\n          typeof propValue === \"object\" &&\n          \"id\" in propValue &&\n          \"widgetId\" in propValue &&\n          !(\"value\" in propValue)) ||\n        (isTrulyResponsiveValue(propValue) &&\n          responsiveValueValues(propValue).every(\n            (v) =>\n              typeof v === \"object\" &&\n              v &&\n              \"id\" in v &&\n              \"widgetId\" in v &&\n              !(\"value\" in v)\n          ))\n      ) {\n        resultsProps[propName] = resolveExternalValue(\n          propValue,\n          configId,\n          schemaProp as ExternalSchemaProp,\n          externalData\n        );\n      } else {\n        resultsProps[propName] = props[propName];\n      }\n    } else {\n      resultsProps[propName] = props[propName];\n    }\n  }\n\n  return resultsProps;\n}\n\nexport { ComponentBuilder };\n\nfunction getFieldStatus(\n  externalReference: ResponsiveValue<ExternalReference>,\n  externalData: ExternalData,\n  configId: string,\n  fieldName: string,\n  devices: Devices\n) {\n  return responsiveValueReduce(\n    externalReference,\n    (currentStatus, value: any, deviceId) => {\n      if (!deviceId) {\n        if (!value.id) {\n          return {\n            isLoading: false,\n            renderable: false,\n          };\n        }\n\n        const externalValue = getResolvedExternalDataValue(\n          externalData,\n          configId,\n          fieldName,\n          value\n        );\n\n        return {\n          isLoading: currentStatus.isLoading || externalValue === undefined,\n          renderable:\n            currentStatus.renderable &&\n            externalValue !== undefined &&\n            (externalValue.type === \"object\" ? value.key !== undefined : true),\n        };\n      }\n\n      if (currentStatus.isLoading || !currentStatus.renderable) {\n        return currentStatus;\n      }\n\n      const externalReferenceValue = responsiveValueGetDefinedValue(\n        value,\n        deviceId,\n        devices\n      );\n\n      if (!externalReferenceValue || externalReferenceValue.id === null) {\n        return {\n          isLoading: false,\n          renderable: false,\n        };\n      }\n\n      const externalValue = getResolvedExternalDataValue(\n        externalData,\n        configId,\n        fieldName,\n        externalReferenceValue\n      );\n\n      return {\n        isLoading: currentStatus.isLoading || externalValue === undefined,\n        renderable:\n          currentStatus.renderable &&\n          externalValue !== undefined &&\n          (externalValue.type === \"object\"\n            ? externalReferenceValue.key !== undefined\n            : true),\n      };\n    },\n    { renderable: true, isLoading: false },\n    devices\n  );\n}\n\nfunction getComponentMainType(componentTypes: string[]) {\n  let type;\n\n  if (\n    componentTypes.includes(\"action\") ||\n    componentTypes.includes(\"actionLink\")\n  ) {\n    type = \"action\";\n  } else if (componentTypes.includes(\"card\")) {\n    type = \"card\";\n  } else if (componentTypes.includes(\"symbol\")) {\n    type = \"icon\";\n  } else if (componentTypes.includes(\"button\")) {\n    type = \"button\";\n  } else if (\n    componentTypes.includes(\"section\") ||\n    componentTypes.includes(\"token\")\n  ) {\n    type = \"section\";\n  } else if (componentTypes.includes(\"item\")) {\n    type = \"item\";\n  } else if (\n    componentTypes.includes(\"image\") ||\n    componentTypes.includes(\"$image\")\n  ) {\n    type = \"image\";\n  } else if (componentTypes.includes(\"actionTextModifier\")) {\n    type = \"actionTextModifier\";\n  } else {\n    type = \"item\";\n  }\n\n  return type;\n}\n"],"names":["buildBoxes","compiled","name","actionWrappers","meta","Array","isArray","map","x","index","__isBox","boxProps","__compiled","__name","devices","vars","stitches","React","createElement","Box","ret","key","getComponentDefinition","runtimeContext","findComponentDefinitionById","_component","getRenderabilityStatus","externalData","status","renderable","isLoading","fieldsRequiredToRender","Set","componentDefinition","definitions","requiredExternalFields","schema","filter","schemaProp","type","propValue","props","prop","optional","length","resourceSchemaProp","externalReference","fieldStatus","getFieldStatus","_id","add","label","getCompiledSubcomponents","id","compiledArray","contextProps","path","isEditing","components","originalPath","locale","noInline","elements","compiledChild","ComponentBuilder","isSchemaPropComponent","EditableComponentBuilder","Placeholder","getComponentMainType","accepts","appearance","placeholderAppearance","onClick","handleComponentPickerCloseMessage","event","data","window","removeEventListener","payload","config","parent","postMessage","itemInserted","block","addEventListener","componentPickerOpened","Fragment","passedProps","restProps","allPassedProps","useEasyblocksMetadata","useEasyblocksExternalData","__editing","undefined","pathSeparator","component","getComponent","isMissingComponent","isMissingInstance","isMissing","MissingComponent","error","console","warn","Component","shopstoryCompiledConfig","styled","forEach","isSchemaPropComponentOrComponentCollection","compiledChildren","ref","__isSelected","restPassedProps","runtime","resop","easyblocksProp","isSelected","componentProps","mapExternalProps","__easyblocks","configId","resultsProps","propName","find","currentSchema","isLocalTextReference","value","isTrulyResponsiveValue","responsiveValueValues","every","v","resolveExternalValue","fieldName","responsiveValueReduce","currentStatus","deviceId","externalValue","getResolvedExternalDataValue","externalReferenceValue","responsiveValueGetDefinedValue","componentTypes","includes"],"mappings":"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"}