{"version":3,"file":"builders.js","sources":["../../../../../src/compiler/builtins/$richText/builders.ts"],"sourcesContent":["import { uniqueId } from \"@/utils\";\r\nimport { SetOptional } from \"type-fest\";\r\nimport type { TokenValue } from \"../../../types\";\r\nimport type { RichTextComponentConfig } from \"./$richText\";\r\nimport type {\r\n  RichTextBlockElementComponentConfig,\r\n  RichTextBlockElementType,\r\n} from \"./$richTextBlockElement/$richTextBlockElement\";\r\nimport type { RichTextLineElementComponentConfig } from \"./$richTextLineElement/$richTextLineElement\";\r\nimport type { RichTextPartComponentConfig } from \"./$richTextPart/$richTextPart\";\r\n\r\ninterface Identity {\r\n  id: string;\r\n}\r\n\r\nfunction buildRichTextNoCodeEntry(options?: {\r\n  text?: string;\r\n  font?: string;\r\n  color?: string;\r\n  accessibilityRole?: string;\r\n  locale?: string;\r\n}) {\r\n  const { accessibilityRole, font, color, text, locale = \"en\" } = options ?? {};\r\n\r\n  const colorTokenValue: TokenValue = {\r\n    value: \"#000000\",\r\n    widgetId: \"@easyblocks/color\",\r\n  };\r\n\r\n  if (color) {\r\n    colorTokenValue.tokenId = color;\r\n  }\r\n\r\n  const fontTokenValue: TokenValue = {\r\n    value: {\r\n      fontFamily: \"sans-serif\",\r\n      fontSize: \"16px\",\r\n    },\r\n  };\r\n\r\n  if (font) {\r\n    fontTokenValue.tokenId = font;\r\n  }\r\n\r\n  return {\r\n    _id: uniqueId(),\r\n    _component: \"@easyblocks/rich-text\",\r\n    accessibilityRole: accessibilityRole ?? \"div\",\r\n    elements: {\r\n      [locale ?? \"en\"]: [\r\n        buildRichTextBlockElementComponentConfig(\"paragraph\", [\r\n          buildRichTextLineElementComponentConfig({\r\n            elements: [\r\n              buildRichTextPartComponentConfig({\r\n                color: colorTokenValue,\r\n                font: fontTokenValue,\r\n                value: text ?? \"Lorem ipsum\",\r\n                TextWrapper: [],\r\n              }),\r\n            ],\r\n          }),\r\n        ]),\r\n      ],\r\n    },\r\n    isListStyleAuto: true,\r\n    mainColor: colorTokenValue,\r\n    mainFont: fontTokenValue,\r\n  };\r\n}\r\n\r\nfunction buildRichTextComponentConfig({\r\n  accessibilityRole,\r\n  locale,\r\n  elements,\r\n  isListStyleAuto,\r\n  mainColor,\r\n  mainFont,\r\n}: Pick<RichTextComponentConfig, \"mainColor\" | \"mainFont\"> &\r\n  Partial<\r\n    Pick<RichTextComponentConfig, \"accessibilityRole\" | \"isListStyleAuto\">\r\n  > & {\r\n    locale: string;\r\n    elements: RichTextComponentConfig[\"elements\"][string];\r\n  }): RichTextComponentConfig {\r\n  return {\r\n    _id: uniqueId(),\r\n    _component: \"@easyblocks/rich-text\",\r\n    accessibilityRole: accessibilityRole ?? \"div\",\r\n    elements: {\r\n      [locale]: elements,\r\n    },\r\n    isListStyleAuto: isListStyleAuto ?? true,\r\n    mainColor,\r\n    mainFont,\r\n  };\r\n}\r\n\r\nfunction buildRichTextBlockElementComponentConfig(\r\n  type: RichTextBlockElementType,\r\n  elements: RichTextBlockElementComponentConfig[\"elements\"]\r\n): RichTextBlockElementComponentConfig {\r\n  return {\r\n    _component: \"@easyblocks/rich-text-block-element\",\r\n    elements,\r\n    type,\r\n    _id: uniqueId(),\r\n  };\r\n}\r\n\r\nfunction buildRichTextParagraphBlockElementComponentConfig({\r\n  elements,\r\n}: Pick<\r\n  RichTextBlockElementComponentConfig,\r\n  \"elements\"\r\n>): RichTextBlockElementComponentConfig {\r\n  return {\r\n    _component: \"@easyblocks/rich-text-block-element\",\r\n    elements,\r\n    type: \"paragraph\",\r\n    _id: uniqueId(),\r\n  };\r\n}\r\n\r\nfunction buildRichTextBulletedListBlockElementComponentConfig({\r\n  elements,\r\n}: Pick<\r\n  RichTextBlockElementComponentConfig,\r\n  \"elements\"\r\n>): RichTextBlockElementComponentConfig {\r\n  return {\r\n    _component: \"@easyblocks/rich-text-block-element\",\r\n    elements,\r\n    type: \"bulleted-list\",\r\n    _id: uniqueId(),\r\n  };\r\n}\r\n\r\nfunction buildRichTextLineElementComponentConfig({\r\n  elements,\r\n}: Pick<\r\n  RichTextLineElementComponentConfig,\r\n  \"elements\"\r\n>): RichTextLineElementComponentConfig {\r\n  return {\r\n    _component: \"@easyblocks/rich-text-line-element\",\r\n    elements,\r\n    _id: uniqueId(),\r\n  };\r\n}\r\n\r\nfunction buildRichTextPartComponentConfig({\r\n  color,\r\n  font,\r\n  value,\r\n  id,\r\n  TextWrapper,\r\n}: SetOptional<\r\n  Omit<RichTextPartComponentConfig, \"_id\" | \"_component\"> & Partial<Identity>,\r\n  \"TextWrapper\"\r\n>): RichTextPartComponentConfig {\r\n  return {\r\n    _id: id ?? uniqueId(),\r\n    _component: \"@easyblocks/rich-text-part\",\r\n    color,\r\n    font,\r\n    value,\r\n    TextWrapper: TextWrapper ?? [],\r\n  };\r\n}\r\n\r\nexport {\r\n  buildRichTextBlockElementComponentConfig,\r\n  buildRichTextBulletedListBlockElementComponentConfig,\r\n  buildRichTextComponentConfig,\r\n  buildRichTextLineElementComponentConfig,\r\n  buildRichTextNoCodeEntry,\r\n  buildRichTextParagraphBlockElementComponentConfig,\r\n  buildRichTextPartComponentConfig,\r\n};\r\n"],"names":["buildRichTextNoCodeEntry","options","accessibilityRole","font","color","text","locale","colorTokenValue","value","widgetId","tokenId","fontTokenValue","fontFamily","fontSize","_id","uniqueId","_component","elements","buildRichTextBlockElementComponentConfig","buildRichTextLineElementComponentConfig","buildRichTextPartComponentConfig","TextWrapper","isListStyleAuto","mainColor","mainFont","buildRichTextComponentConfig","_ref","type","buildRichTextParagraphBlockElementComponentConfig","_ref2","buildRichTextBulletedListBlockElementComponentConfig","_ref3","_ref4","_ref5","id"],"mappings":";;;AAeA,SAASA,wBAAwBA,CAACC,OAMjC,EAAE;EACD,MAAM;IAAEC,iBAAiB;IAAEC,IAAI;IAAEC,KAAK;IAAEC,IAAI;AAAEC,IAAAA,MAAM,GAAG,IAAA;AAAK,GAAC,GAAGL,OAAO,IAAI,EAAE,CAAA;AAE7E,EAAA,MAAMM,eAA2B,GAAG;AAClCC,IAAAA,KAAK,EAAE,SAAS;AAChBC,IAAAA,QAAQ,EAAE,mBAAA;GACX,CAAA;AAED,EAAA,IAAIL,KAAK,EAAE;IACTG,eAAe,CAACG,OAAO,GAAGN,KAAK,CAAA;AACjC,GAAA;AAEA,EAAA,MAAMO,cAA0B,GAAG;AACjCH,IAAAA,KAAK,EAAE;AACLI,MAAAA,UAAU,EAAE,YAAY;AACxBC,MAAAA,QAAQ,EAAE,MAAA;AACZ,KAAA;GACD,CAAA;AAED,EAAA,IAAIV,IAAI,EAAE;IACRQ,cAAc,CAACD,OAAO,GAAGP,IAAI,CAAA;AAC/B,GAAA;EAEA,OAAO;IACLW,GAAG,EAAEC,QAAQ,EAAE;AACfC,IAAAA,UAAU,EAAE,uBAAuB;IACnCd,iBAAiB,EAAEA,iBAAiB,IAAI,KAAK;AAC7Ce,IAAAA,QAAQ,EAAE;MACR,CAACX,MAAM,IAAI,IAAI,GAAG,CAChBY,wCAAwC,CAAC,WAAW,EAAE,CACpDC,uCAAuC,CAAC;QACtCF,QAAQ,EAAE,CACRG,gCAAgC,CAAC;AAC/BhB,UAAAA,KAAK,EAAEG,eAAe;AACtBJ,UAAAA,IAAI,EAAEQ,cAAc;UACpBH,KAAK,EAAEH,IAAI,IAAI,aAAa;AAC5BgB,UAAAA,WAAW,EAAE,EAAA;AACf,SAAC,CAAC,CAAA;OAEL,CAAC,CACH,CAAC,CAAA;KAEL;AACDC,IAAAA,eAAe,EAAE,IAAI;AACrBC,IAAAA,SAAS,EAAEhB,eAAe;AAC1BiB,IAAAA,QAAQ,EAAEb,cAAAA;GACX,CAAA;AACH,CAAA;AAEA,SAASc,4BAA4BA,CAAAC,IAAA,EAaP;EAAA,IAbQ;IACpCxB,iBAAiB;IACjBI,MAAM;IACNW,QAAQ;IACRK,eAAe;IACfC,SAAS;AACTC,IAAAA,QAAAA;AAOA,GAAC,GAAAE,IAAA,CAAA;EACD,OAAO;IACLZ,GAAG,EAAEC,QAAQ,EAAE;AACfC,IAAAA,UAAU,EAAE,uBAAuB;IACnCd,iBAAiB,EAAEA,iBAAiB,IAAI,KAAK;AAC7Ce,IAAAA,QAAQ,EAAE;AACR,MAAA,CAACX,MAAM,GAAGW,QAAAA;KACX;IACDK,eAAe,EAAEA,eAAe,IAAI,IAAI;IACxCC,SAAS;AACTC,IAAAA,QAAAA;GACD,CAAA;AACH,CAAA;AAEA,SAASN,wCAAwCA,CAC/CS,IAA8B,EAC9BV,QAAyD,EACpB;EACrC,OAAO;AACLD,IAAAA,UAAU,EAAE,qCAAqC;IACjDC,QAAQ;IACRU,IAAI;IACJb,GAAG,EAAEC,QAAQ,EAAC;GACf,CAAA;AACH,CAAA;AAEA,SAASa,iDAAiDA,CAAAC,KAAA,EAKlB;EAAA,IALmB;AACzDZ,IAAAA,QAAAA;AAIF,GAAC,GAAAY,KAAA,CAAA;EACC,OAAO;AACLb,IAAAA,UAAU,EAAE,qCAAqC;IACjDC,QAAQ;AACRU,IAAAA,IAAI,EAAE,WAAW;IACjBb,GAAG,EAAEC,QAAQ,EAAC;GACf,CAAA;AACH,CAAA;AAEA,SAASe,oDAAoDA,CAAAC,KAAA,EAKrB;EAAA,IALsB;AAC5Dd,IAAAA,QAAAA;AAIF,GAAC,GAAAc,KAAA,CAAA;EACC,OAAO;AACLf,IAAAA,UAAU,EAAE,qCAAqC;IACjDC,QAAQ;AACRU,IAAAA,IAAI,EAAE,eAAe;IACrBb,GAAG,EAAEC,QAAQ,EAAC;GACf,CAAA;AACH,CAAA;AAEA,SAASI,uCAAuCA,CAAAa,KAAA,EAKT;EAAA,IALU;AAC/Cf,IAAAA,QAAAA;AAIF,GAAC,GAAAe,KAAA,CAAA;EACC,OAAO;AACLhB,IAAAA,UAAU,EAAE,oCAAoC;IAChDC,QAAQ;IACRH,GAAG,EAAEC,QAAQ,EAAC;GACf,CAAA;AACH,CAAA;AAEA,SAASK,gCAAgCA,CAAAa,KAAA,EAST;EAAA,IATU;IACxC7B,KAAK;IACLD,IAAI;IACJK,KAAK;IACL0B,EAAE;AACFb,IAAAA,WAAAA;AAIF,GAAC,GAAAY,KAAA,CAAA;EACC,OAAO;AACLnB,IAAAA,GAAG,EAAEoB,EAAE,IAAInB,QAAQ,EAAE;AACrBC,IAAAA,UAAU,EAAE,4BAA4B;IACxCZ,KAAK;IACLD,IAAI;IACJK,KAAK;IACLa,WAAW,EAAEA,WAAW,IAAI,EAAA;GAC7B,CAAA;AACH;;;;"}