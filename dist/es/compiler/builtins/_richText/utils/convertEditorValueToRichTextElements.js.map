{"version":3,"file":"convertEditorValueToRichTextElements.js","sources":["../../../../../../src/compiler/builtins/$richText/utils/convertEditorValueToRichTextElements.ts"],"sourcesContent":["import { cleanString } from \"@/utils\";\nimport { Element } from \"slate\";\nimport type {\n  BlockElement,\n  BulletedList,\n  ListItemElement,\n  NumberedList,\n  ParagraphElement,\n  TextLineElement,\n} from \"../$richText.types\";\nimport type { RichTextBlockElementComponentConfig } from \"../$richTextBlockElement/$richTextBlockElement\";\nimport type { RichTextLineElementComponentConfig } from \"../$richTextLineElement/$richTextLineElement\";\nimport {\n  buildRichTextBlockElementComponentConfig,\n  buildRichTextLineElementComponentConfig,\n  buildRichTextPartComponentConfig,\n} from \"../builders\";\n\nfunction convertEditorValueToRichTextElements(\n  editorValue: Array<BlockElement>\n): Array<RichTextBlockElementComponentConfig> {\n  return editorValue.map((blockElement) => {\n    if (Element.isElementType<BulletedList>(blockElement, \"bulleted-list\")) {\n      return convertEditorListElementToRichTextListBlockElement<BulletedList>(\n        \"bulleted-list\",\n        blockElement\n      );\n    }\n\n    if (Element.isElementType<NumberedList>(blockElement, \"numbered-list\")) {\n      return convertEditorListElementToRichTextListBlockElement<NumberedList>(\n        \"numbered-list\",\n        blockElement\n      );\n    }\n\n    if (Element.isElementType<ParagraphElement>(blockElement, \"paragraph\")) {\n      return convertEditorParagraphElementToRichTextParagraphBlockElement(\n        blockElement\n      );\n    }\n\n    throw new Error(\"Unknown block element\");\n  });\n}\n\nfunction convertEditorElementToRichTextLineElement(\n  editorElement: TextLineElement | ListItemElement\n): RichTextLineElementComponentConfig {\n  const lineElement = buildRichTextLineElementComponentConfig({\n    elements: editorElement.children.map((child) => {\n      return buildRichTextPartComponentConfig({\n        value: cleanString(child.text),\n        color: child.color,\n        font: child.font,\n        id: child.id,\n        TextWrapper: child.TextWrapper,\n      });\n    }),\n  });\n  lineElement._id = editorElement.id;\n\n  return lineElement;\n}\n\nfunction convertEditorListElementToRichTextListBlockElement<\n  ListElement extends BulletedList | NumberedList\n>(\n  type: \"bulleted-list\" | \"numbered-list\",\n  editorElement: ListElement\n): RichTextBlockElementComponentConfig {\n  const listBlockElement = buildRichTextBlockElementComponentConfig(\n    type,\n    editorElement.children.map((child) => {\n      return convertEditorElementToRichTextLineElement(child);\n    })\n  );\n  listBlockElement._id = editorElement.id;\n\n  return listBlockElement;\n}\n\nfunction convertEditorParagraphElementToRichTextParagraphBlockElement(\n  editorElement: ParagraphElement\n): RichTextBlockElementComponentConfig {\n  const paragraphBlockElement = buildRichTextBlockElementComponentConfig(\n    \"paragraph\",\n    editorElement.children.map((child) => {\n      return convertEditorElementToRichTextLineElement(child);\n    })\n  );\n  paragraphBlockElement._id = editorElement.id;\n\n  return paragraphBlockElement;\n}\n\nexport { convertEditorValueToRichTextElements };\n"],"names":["convertEditorValueToRichTextElements","editorValue","map","blockElement","Element","isElementType","convertEditorListElementToRichTextListBlockElement","convertEditorParagraphElementToRichTextParagraphBlockElement","Error","convertEditorElementToRichTextLineElement","editorElement","lineElement","buildRichTextLineElementComponentConfig","elements","children","child","buildRichTextPartComponentConfig","value","cleanString","text","color","font","id","TextWrapper","_id","type","listBlockElement","buildRichTextBlockElementComponentConfig","paragraphBlockElement"],"mappings":";;;;;AAkBA,SAASA,oCAAoCA,CAC3CC,WAAgC,EACY;AAC5C,EAAA,OAAOA,WAAW,CAACC,GAAG,CAAEC,YAAY,IAAK;IACvC,IAAIC,OAAO,CAACC,aAAa,CAAeF,YAAY,EAAE,eAAe,CAAC,EAAE;AACtE,MAAA,OAAOG,kDAAkD,CACvD,eAAe,EACfH,YACF,CAAC,CAAA;AACH,KAAA;IAEA,IAAIC,OAAO,CAACC,aAAa,CAAeF,YAAY,EAAE,eAAe,CAAC,EAAE;AACtE,MAAA,OAAOG,kDAAkD,CACvD,eAAe,EACfH,YACF,CAAC,CAAA;AACH,KAAA;IAEA,IAAIC,OAAO,CAACC,aAAa,CAAmBF,YAAY,EAAE,WAAW,CAAC,EAAE;MACtE,OAAOI,4DAA4D,CACjEJ,YACF,CAAC,CAAA;AACH,KAAA;AAEA,IAAA,MAAM,IAAIK,KAAK,CAAC,uBAAuB,CAAC,CAAA;AAC1C,GAAC,CAAC,CAAA;AACJ,CAAA;AAEA,SAASC,yCAAyCA,CAChDC,aAAgD,EACZ;EACpC,MAAMC,WAAW,GAAGC,uCAAuC,CAAC;IAC1DC,QAAQ,EAAEH,aAAa,CAACI,QAAQ,CAACZ,GAAG,CAAEa,KAAK,IAAK;AAC9C,MAAA,OAAOC,gCAAgC,CAAC;AACtCC,QAAAA,KAAK,EAAEC,WAAW,CAACH,KAAK,CAACI,IAAI,CAAC;QAC9BC,KAAK,EAAEL,KAAK,CAACK,KAAK;QAClBC,IAAI,EAAEN,KAAK,CAACM,IAAI;QAChBC,EAAE,EAAEP,KAAK,CAACO,EAAE;QACZC,WAAW,EAAER,KAAK,CAACQ,WAAAA;AACrB,OAAC,CAAC,CAAA;KACH,CAAA;AACH,GAAC,CAAC,CAAA;AACFZ,EAAAA,WAAW,CAACa,GAAG,GAAGd,aAAa,CAACY,EAAE,CAAA;AAElC,EAAA,OAAOX,WAAW,CAAA;AACpB,CAAA;AAEA,SAASL,kDAAkDA,CAGzDmB,IAAuC,EACvCf,aAA0B,EACW;AACrC,EAAA,MAAMgB,gBAAgB,GAAGC,wCAAwC,CAC/DF,IAAI,EACJf,aAAa,CAACI,QAAQ,CAACZ,GAAG,CAAEa,KAAK,IAAK;IACpC,OAAON,yCAAyC,CAACM,KAAK,CAAC,CAAA;AACzD,GAAC,CACH,CAAC,CAAA;AACDW,EAAAA,gBAAgB,CAACF,GAAG,GAAGd,aAAa,CAACY,EAAE,CAAA;AAEvC,EAAA,OAAOI,gBAAgB,CAAA;AACzB,CAAA;AAEA,SAASnB,4DAA4DA,CACnEG,aAA+B,EACM;AACrC,EAAA,MAAMkB,qBAAqB,GAAGD,wCAAwC,CACpE,WAAW,EACXjB,aAAa,CAACI,QAAQ,CAACZ,GAAG,CAAEa,KAAK,IAAK;IACpC,OAAON,yCAAyC,CAACM,KAAK,CAAC,CAAA;AACzD,GAAC,CACH,CAAC,CAAA;AACDa,EAAAA,qBAAqB,CAACJ,GAAG,GAAGd,aAAa,CAACY,EAAE,CAAA;AAE5C,EAAA,OAAOM,qBAAqB,CAAA;AAC9B;;;;"}