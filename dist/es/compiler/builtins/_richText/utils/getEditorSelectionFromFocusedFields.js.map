{"version":3,"file":"getEditorSelectionFromFocusedFields.js","sources":["../../../../../../src/compiler/builtins/$richText/utils/getEditorSelectionFromFocusedFields.ts"],"sourcesContent":["import { dotNotationGet, last } from \"@/utils\";\r\nimport type { Selection } from \"slate\";\r\nimport { parseFocusedRichTextPartConfigPath } from \"./parseRichTextPartConfigPath\";\r\n\r\nfunction getEditorSelectionFromFocusedFields(\r\n  focusedFields: Array<string>,\r\n  form: any\r\n): Selection {\r\n  try {\r\n    const anchorFocusedField = focusedFields[0];\r\n    const focusFocusedField = last(focusedFields);\r\n    const parsedAnchorField =\r\n      parseFocusedRichTextPartConfigPath(anchorFocusedField);\r\n    const parsedFocusedField =\r\n      parseFocusedRichTextPartConfigPath(focusFocusedField);\r\n\r\n    if (!parsedAnchorField.path.length || !parsedFocusedField.path.length) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      anchor: {\r\n        offset: parsedAnchorField.range ? parsedAnchorField.range[0] : 0,\r\n        path: parsedAnchorField.path,\r\n      },\r\n      focus: {\r\n        offset: parsedFocusedField.range\r\n          ? parsedFocusedField.range[1]\r\n          : dotNotationGet(form.values, focusFocusedField).value.length,\r\n        path: parsedFocusedField.path,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nexport { getEditorSelectionFromFocusedFields };\r\n"],"names":["getEditorSelectionFromFocusedFields","focusedFields","form","anchorFocusedField","focusFocusedField","last","parsedAnchorField","parseFocusedRichTextPartConfigPath","parsedFocusedField","path","length","anchor","offset","range","focus","dotNotationGet","values","value","error","console","log"],"mappings":";;;;;AAIA,SAASA,mCAAmCA,CAC1CC,aAA4B,EAC5BC,IAAS,EACE;EACX,IAAI;AACF,IAAA,MAAMC,kBAAkB,GAAGF,aAAa,CAAC,CAAC,CAAC,CAAA;AAC3C,IAAA,MAAMG,iBAAiB,GAAGC,IAAI,CAACJ,aAAa,CAAC,CAAA;AAC7C,IAAA,MAAMK,iBAAiB,GACrBC,kCAAkC,CAACJ,kBAAkB,CAAC,CAAA;AACxD,IAAA,MAAMK,kBAAkB,GACtBD,kCAAkC,CAACH,iBAAiB,CAAC,CAAA;AAEvD,IAAA,IAAI,CAACE,iBAAiB,CAACG,IAAI,CAACC,MAAM,IAAI,CAACF,kBAAkB,CAACC,IAAI,CAACC,MAAM,EAAE;AACrE,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;IAEA,OAAO;AACLC,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAEN,iBAAiB,CAACO,KAAK,GAAGP,iBAAiB,CAACO,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;QAChEJ,IAAI,EAAEH,iBAAiB,CAACG,IAAAA;OACzB;AACDK,MAAAA,KAAK,EAAE;QACLF,MAAM,EAAEJ,kBAAkB,CAACK,KAAK,GAC5BL,kBAAkB,CAACK,KAAK,CAAC,CAAC,CAAC,GAC3BE,cAAc,CAACb,IAAI,CAACc,MAAM,EAAEZ,iBAAiB,CAAC,CAACa,KAAK,CAACP,MAAM;QAC/DD,IAAI,EAAED,kBAAkB,CAACC,IAAAA;AAC3B,OAAA;KACD,CAAA;GACF,CAAC,OAAOS,KAAK,EAAE;AACdC,IAAAA,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAA;AAElB,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;AACF;;;;"}