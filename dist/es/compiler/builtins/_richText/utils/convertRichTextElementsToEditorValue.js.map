{"version":3,"file":"convertRichTextElementsToEditorValue.js","sources":["../../../../../../src/compiler/builtins/$richText/utils/convertRichTextElementsToEditorValue.ts"],"sourcesContent":["import { uniqueId } from \"@/utils\";\nimport type { Text } from \"slate\";\nimport type { RichTextComponentConfig } from \"../$richText\";\nimport type { BlockElement } from \"../$richText.types\";\nimport type { RichTextBlockElementComponentConfig } from \"../$richTextBlockElement/$richTextBlockElement\";\nimport type { RichTextPartComponentConfig } from \"../$richTextPart/$richTextPart\";\n\nfunction convertRichTextElementsToEditorValue(\n  richTextElements: RichTextComponentConfig[\"elements\"][string] | undefined\n): Array<BlockElement> {\n  if (!richTextElements || richTextElements.length === 0) {\n    return getPlaceholderRichTextElements();\n  }\n\n  return richTextElements.map((richTextBlockElementComponentConfig) => {\n    return convertRichTextBlockElementComponentConfigToEditorElement(\n      richTextBlockElementComponentConfig\n    );\n  });\n}\n\nexport { convertRichTextElementsToEditorValue };\n\nfunction convertRichTextPartComponentConfigToEditorText(\n  richTextPartComponentConfig: RichTextPartComponentConfig\n): Text {\n  return {\n    color: richTextPartComponentConfig.color,\n    font: richTextPartComponentConfig.font,\n    id: richTextPartComponentConfig._id,\n    text: richTextPartComponentConfig.value,\n    TextWrapper: richTextPartComponentConfig.TextWrapper,\n  };\n}\n\nfunction convertRichTextBlockElementComponentConfigToEditorElement(\n  blockElementComponentConfig: RichTextBlockElementComponentConfig\n): BlockElement {\n  if (\n    blockElementComponentConfig.type === \"bulleted-list\" ||\n    blockElementComponentConfig.type === \"numbered-list\"\n  ) {\n    return {\n      id: blockElementComponentConfig._id,\n      type: blockElementComponentConfig.type,\n      children: blockElementComponentConfig.elements.map(\n        (lineElementComponentConfig) => {\n          return {\n            type: \"list-item\",\n            id: lineElementComponentConfig._id,\n            children: lineElementComponentConfig.elements.map(\n              (childComponentConfig) => {\n                return convertRichTextPartComponentConfigToEditorText(\n                  childComponentConfig\n                );\n              }\n            ),\n          };\n        }\n      ),\n    };\n  }\n\n  return {\n    id: blockElementComponentConfig._id,\n    type: blockElementComponentConfig.type,\n    children: blockElementComponentConfig.elements.map(\n      (lineElementComponentConfig) => {\n        return {\n          type: \"text-line\",\n          id: lineElementComponentConfig._id,\n          children: lineElementComponentConfig.elements.map(\n            (childComponentConfig) => {\n              return convertRichTextPartComponentConfigToEditorText(\n                childComponentConfig\n              );\n            }\n          ),\n        };\n      }\n    ),\n  };\n}\n\nfunction getPlaceholderRichTextElements(): Array<BlockElement> {\n  return [\n    {\n      id: uniqueId(),\n      type: \"paragraph\",\n      children: [\n        {\n          id: uniqueId(),\n          type: \"text-line\",\n          children: [\n            {\n              id: uniqueId(),\n              color: {\n                tokenId: \"black\",\n                value: \"black\",\n                widgetId: \"@easyblocks/color\",\n              },\n              font: {\n                tokenId: \"$body\",\n                value: \"\",\n              },\n              text: \"\",\n              TextWrapper: [],\n            },\n          ],\n        },\n      ],\n    },\n  ];\n}\n"],"names":["convertRichTextElementsToEditorValue","richTextElements","length","getPlaceholderRichTextElements","map","richTextBlockElementComponentConfig","convertRichTextBlockElementComponentConfigToEditorElement","convertRichTextPartComponentConfigToEditorText","richTextPartComponentConfig","color","font","id","_id","text","value","TextWrapper","blockElementComponentConfig","type","children","elements","lineElementComponentConfig","childComponentConfig","uniqueId","tokenId","widgetId"],"mappings":";;;AAOA,SAASA,oCAAoCA,CAC3CC,gBAAyE,EACpD;EACrB,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACC,MAAM,KAAK,CAAC,EAAE;IACtD,OAAOC,8BAA8B,EAAE,CAAA;AACzC,GAAA;AAEA,EAAA,OAAOF,gBAAgB,CAACG,GAAG,CAAEC,mCAAmC,IAAK;IACnE,OAAOC,yDAAyD,CAC9DD,mCACF,CAAC,CAAA;AACH,GAAC,CAAC,CAAA;AACJ,CAAA;AAIA,SAASE,8CAA8CA,CACrDC,2BAAwD,EAClD;EACN,OAAO;IACLC,KAAK,EAAED,2BAA2B,CAACC,KAAK;IACxCC,IAAI,EAAEF,2BAA2B,CAACE,IAAI;IACtCC,EAAE,EAAEH,2BAA2B,CAACI,GAAG;IACnCC,IAAI,EAAEL,2BAA2B,CAACM,KAAK;IACvCC,WAAW,EAAEP,2BAA2B,CAACO,WAAAA;GAC1C,CAAA;AACH,CAAA;AAEA,SAAST,yDAAyDA,CAChEU,2BAAgE,EAClD;EACd,IACEA,2BAA2B,CAACC,IAAI,KAAK,eAAe,IACpDD,2BAA2B,CAACC,IAAI,KAAK,eAAe,EACpD;IACA,OAAO;MACLN,EAAE,EAAEK,2BAA2B,CAACJ,GAAG;MACnCK,IAAI,EAAED,2BAA2B,CAACC,IAAI;MACtCC,QAAQ,EAAEF,2BAA2B,CAACG,QAAQ,CAACf,GAAG,CAC/CgB,0BAA0B,IAAK;QAC9B,OAAO;AACLH,UAAAA,IAAI,EAAE,WAAW;UACjBN,EAAE,EAAES,0BAA0B,CAACR,GAAG;UAClCM,QAAQ,EAAEE,0BAA0B,CAACD,QAAQ,CAACf,GAAG,CAC9CiB,oBAAoB,IAAK;YACxB,OAAOd,8CAA8C,CACnDc,oBACF,CAAC,CAAA;WAEL,CAAA;SACD,CAAA;OAEL,CAAA;KACD,CAAA;AACH,GAAA;EAEA,OAAO;IACLV,EAAE,EAAEK,2BAA2B,CAACJ,GAAG;IACnCK,IAAI,EAAED,2BAA2B,CAACC,IAAI;IACtCC,QAAQ,EAAEF,2BAA2B,CAACG,QAAQ,CAACf,GAAG,CAC/CgB,0BAA0B,IAAK;MAC9B,OAAO;AACLH,QAAAA,IAAI,EAAE,WAAW;QACjBN,EAAE,EAAES,0BAA0B,CAACR,GAAG;QAClCM,QAAQ,EAAEE,0BAA0B,CAACD,QAAQ,CAACf,GAAG,CAC9CiB,oBAAoB,IAAK;UACxB,OAAOd,8CAA8C,CACnDc,oBACF,CAAC,CAAA;SAEL,CAAA;OACD,CAAA;KAEL,CAAA;GACD,CAAA;AACH,CAAA;AAEA,SAASlB,8BAA8BA,GAAwB;AAC7D,EAAA,OAAO,CACL;IACEQ,EAAE,EAAEW,QAAQ,EAAE;AACdL,IAAAA,IAAI,EAAE,WAAW;AACjBC,IAAAA,QAAQ,EAAE,CACR;MACEP,EAAE,EAAEW,QAAQ,EAAE;AACdL,MAAAA,IAAI,EAAE,WAAW;AACjBC,MAAAA,QAAQ,EAAE,CACR;QACEP,EAAE,EAAEW,QAAQ,EAAE;AACdb,QAAAA,KAAK,EAAE;AACLc,UAAAA,OAAO,EAAE,OAAO;AAChBT,UAAAA,KAAK,EAAE,OAAO;AACdU,UAAAA,QAAQ,EAAE,mBAAA;SACX;AACDd,QAAAA,IAAI,EAAE;AACJa,UAAAA,OAAO,EAAE,OAAO;AAChBT,UAAAA,KAAK,EAAE,EAAA;SACR;AACDD,QAAAA,IAAI,EAAE,EAAE;AACRE,QAAAA,WAAW,EAAE,EAAA;OACd,CAAA;KAEJ,CAAA;AAEL,GAAC,CACF,CAAA;AACH;;;;"}