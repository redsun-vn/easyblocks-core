{"version":3,"file":"CompilationCache.js","sources":["../../../src/compiler/CompilationCache.ts"],"sourcesContent":["import { CompiledComponentConfig } from \"../types\";\r\nimport { InternalEditingInfo } from \"./types\";\r\n\r\ntype CompilationCacheItemValue = {\r\n  /**\r\n   * Values compared during compilation to determine if component has changed\r\n   */\r\n  values: {\r\n    values: { _id: string; _component: string } & Record<string, any>;\r\n    params: Record<string, any>;\r\n  };\r\n  valuesAfterAuto: {\r\n    values: { _id: string; _component: string } & Record<string, any>;\r\n    params: Record<string, any>;\r\n  };\r\n  compiledValues: Record<string, any>;\r\n  compiledConfig: CompiledComponentConfig;\r\n  contextProps: { [componentName in string]: Record<string, any> };\r\n  // TODO: editor only????\r\n  editingContextProps?: InternalEditingInfo[\"components\"];\r\n};\r\n\r\nclass CompilationCache {\r\n  private cache: Map<string, CompilationCacheItemValue>;\r\n\r\n  constructor();\r\n  constructor(initialEntries: Array<[string, CompilationCacheItemValue]>);\r\n  constructor(initialEntries?: Array<[string, CompilationCacheItemValue]>) {\r\n    this.cache = initialEntries ? new Map(initialEntries) : new Map();\r\n  }\r\n\r\n  get(key: string): CompilationCacheItemValue | undefined {\r\n    return this.cache.get(key);\r\n  }\r\n\r\n  set(key: string, entry: CompilationCacheItemValue): void {\r\n    this.cache.set(key, entry);\r\n  }\r\n\r\n  get count(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  remove(path: string) {\r\n    this.cache.delete(path);\r\n  }\r\n\r\n  clear() {\r\n    this.cache.clear();\r\n  }\r\n}\r\n\r\nexport { CompilationCache };\r\nexport type { CompilationCacheItemValue };\r\n"],"names":["CompilationCache","constructor","initialEntries","cache","Map","get","key","set","entry","count","size","remove","path","delete","clear"],"mappings":";AAsBA,MAAMA,gBAAgB,CAAC;EAKrBC,WAAWA,CAACC,cAA2D,EAAE;AACvE,IAAA,IAAI,CAACC,KAAK,GAAGD,cAAc,GAAG,IAAIE,GAAG,CAACF,cAAc,CAAC,GAAG,IAAIE,GAAG,EAAE,CAAA;AACnE,GAAA;EAEAC,GAAGA,CAACC,GAAW,EAAyC;AACtD,IAAA,OAAO,IAAI,CAACH,KAAK,CAACE,GAAG,CAACC,GAAG,CAAC,CAAA;AAC5B,GAAA;AAEAC,EAAAA,GAAGA,CAACD,GAAW,EAAEE,KAAgC,EAAQ;IACvD,IAAI,CAACL,KAAK,CAACI,GAAG,CAACD,GAAG,EAAEE,KAAK,CAAC,CAAA;AAC5B,GAAA;EAEA,IAAIC,KAAKA,GAAW;AAClB,IAAA,OAAO,IAAI,CAACN,KAAK,CAACO,IAAI,CAAA;AACxB,GAAA;EAEAC,MAAMA,CAACC,IAAY,EAAE;AACnB,IAAA,IAAI,CAACT,KAAK,CAACU,MAAM,CAACD,IAAI,CAAC,CAAA;AACzB,GAAA;AAEAE,EAAAA,KAAKA,GAAG;AACN,IAAA,IAAI,CAACX,KAAK,CAACW,KAAK,EAAE,CAAA;AACpB,GAAA;AACF;;;;"}