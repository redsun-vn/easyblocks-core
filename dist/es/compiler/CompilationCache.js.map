{"version":3,"file":"CompilationCache.js","sources":["../../../src/compiler/CompilationCache.ts"],"sourcesContent":["import { CompiledComponentConfig } from \"../types\";\nimport { InternalEditingInfo } from \"./types\";\n\ntype CompilationCacheItemValue = {\n  /**\n   * Values compared during compilation to determine if component has changed\n   */\n  values: {\n    values: { _id: string; _component: string } & Record<string, any>;\n    params: Record<string, any>;\n  };\n  valuesAfterAuto: {\n    values: { _id: string; _component: string } & Record<string, any>;\n    params: Record<string, any>;\n  };\n  compiledValues: Record<string, any>;\n  compiledConfig: CompiledComponentConfig;\n  contextProps: { [componentName in string]: Record<string, any> };\n  // TODO: editor only????\n  editingContextProps?: InternalEditingInfo[\"components\"];\n};\n\nclass CompilationCache {\n  private cache: Map<string, CompilationCacheItemValue>;\n\n  constructor();\n  constructor(initialEntries: Array<[string, CompilationCacheItemValue]>);\n  constructor(initialEntries?: Array<[string, CompilationCacheItemValue]>) {\n    this.cache = initialEntries ? new Map(initialEntries) : new Map();\n  }\n\n  get(key: string): CompilationCacheItemValue | undefined {\n    return this.cache.get(key);\n  }\n\n  set(key: string, entry: CompilationCacheItemValue): void {\n    this.cache.set(key, entry);\n  }\n\n  get count(): number {\n    return this.cache.size;\n  }\n\n  remove(path: string) {\n    this.cache.delete(path);\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\nexport { CompilationCache };\nexport type { CompilationCacheItemValue };\n"],"names":["CompilationCache","constructor","initialEntries","cache","Map","get","key","set","entry","count","size","remove","path","delete","clear"],"mappings":";AAsBA,MAAMA,gBAAgB,CAAC;EAKrBC,WAAWA,CAACC,cAA2D,EAAE;AACvE,IAAA,IAAI,CAACC,KAAK,GAAGD,cAAc,GAAG,IAAIE,GAAG,CAACF,cAAc,CAAC,GAAG,IAAIE,GAAG,EAAE,CAAA;AACnE,GAAA;EAEAC,GAAGA,CAACC,GAAW,EAAyC;AACtD,IAAA,OAAO,IAAI,CAACH,KAAK,CAACE,GAAG,CAACC,GAAG,CAAC,CAAA;AAC5B,GAAA;AAEAC,EAAAA,GAAGA,CAACD,GAAW,EAAEE,KAAgC,EAAQ;IACvD,IAAI,CAACL,KAAK,CAACI,GAAG,CAACD,GAAG,EAAEE,KAAK,CAAC,CAAA;AAC5B,GAAA;EAEA,IAAIC,KAAKA,GAAW;AAClB,IAAA,OAAO,IAAI,CAACN,KAAK,CAACO,IAAI,CAAA;AACxB,GAAA;EAEAC,MAAMA,CAACC,IAAY,EAAE;AACnB,IAAA,IAAI,CAACT,KAAK,CAACU,MAAM,CAACD,IAAI,CAAC,CAAA;AACzB,GAAA;AAEAE,EAAAA,KAAKA,GAAG;AACN,IAAA,IAAI,CAACX,KAAK,CAACW,KAAK,EAAE,CAAA;AACpB,GAAA;AACF;;;;"}