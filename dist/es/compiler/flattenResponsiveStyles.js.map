{"version":3,"file":"flattenResponsiveStyles.js","sources":["../../../src/compiler/flattenResponsiveStyles.ts"],"sourcesContent":["/**\n * This function is necessary because if we have Stitches styles object, its breakpoint values should be only on the top level.\n * We can have them nested so we need to transform styles object so that responsive styles goes to the top level.\n */\n\nexport function flattenResponsiveStyles(\n  styles: Record<string, any>\n): Record<string, any> {\n  const result: Record<string, any> = {};\n\n  for (const key in styles) {\n    const value = styles[key];\n\n    if (key.startsWith(\"@\")) {\n      if (!result[key]) {\n        result[key] = {};\n      }\n\n      result[key] = { ...result[key], ...value };\n      continue;\n    }\n\n    if (typeof value === \"object\" && value !== null) {\n      const flattenedValue = flattenResponsiveStyles(value);\n\n      // MERGE\n\n      const nonResponsiveValues: Record<string, any> = {};\n      const responsiveValues: Record<string, any> = {};\n\n      for (const key2 in flattenedValue) {\n        const value2 = flattenedValue[key2];\n\n        if (key2.startsWith(\"@\")) {\n          responsiveValues[key2] = value2;\n        } else {\n          nonResponsiveValues[key2] = value2;\n        }\n      }\n\n      result[key] = nonResponsiveValues;\n\n      for (const breakpoint in responsiveValues) {\n        if (!result[breakpoint]) {\n          result[breakpoint] = {};\n        }\n\n        result[breakpoint] = {\n          ...result[breakpoint],\n          [key]: responsiveValues[breakpoint],\n        };\n      }\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n"],"names":["flattenResponsiveStyles","styles","result","key","value","startsWith","flattenedValue","nonResponsiveValues","responsiveValues","key2","value2","breakpoint"],"mappings":";AAAA;AACA;AACA;AACA;;AAEO,SAASA,uBAAuBA,CACrCC,MAA2B,EACN;EACrB,MAAMC,MAA2B,GAAG,EAAE,CAAA;AAEtC,EAAA,KAAK,MAAMC,GAAG,IAAIF,MAAM,EAAE;AACxB,IAAA,MAAMG,KAAK,GAAGH,MAAM,CAACE,GAAG,CAAC,CAAA;AAEzB,IAAA,IAAIA,GAAG,CAACE,UAAU,CAAC,GAAG,CAAC,EAAE;AACvB,MAAA,IAAI,CAACH,MAAM,CAACC,GAAG,CAAC,EAAE;AAChBD,QAAAA,MAAM,CAACC,GAAG,CAAC,GAAG,EAAE,CAAA;AAClB,OAAA;MAEAD,MAAM,CAACC,GAAG,CAAC,GAAG;QAAE,GAAGD,MAAM,CAACC,GAAG,CAAC;QAAE,GAAGC,KAAAA;OAAO,CAAA;AAC1C,MAAA,SAAA;AACF,KAAA;IAEA,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;AAC/C,MAAA,MAAME,cAAc,GAAGN,uBAAuB,CAACI,KAAK,CAAC,CAAA;;AAErD;;MAEA,MAAMG,mBAAwC,GAAG,EAAE,CAAA;MACnD,MAAMC,gBAAqC,GAAG,EAAE,CAAA;AAEhD,MAAA,KAAK,MAAMC,IAAI,IAAIH,cAAc,EAAE;AACjC,QAAA,MAAMI,MAAM,GAAGJ,cAAc,CAACG,IAAI,CAAC,CAAA;AAEnC,QAAA,IAAIA,IAAI,CAACJ,UAAU,CAAC,GAAG,CAAC,EAAE;AACxBG,UAAAA,gBAAgB,CAACC,IAAI,CAAC,GAAGC,MAAM,CAAA;AACjC,SAAC,MAAM;AACLH,UAAAA,mBAAmB,CAACE,IAAI,CAAC,GAAGC,MAAM,CAAA;AACpC,SAAA;AACF,OAAA;AAEAR,MAAAA,MAAM,CAACC,GAAG,CAAC,GAAGI,mBAAmB,CAAA;AAEjC,MAAA,KAAK,MAAMI,UAAU,IAAIH,gBAAgB,EAAE;AACzC,QAAA,IAAI,CAACN,MAAM,CAACS,UAAU,CAAC,EAAE;AACvBT,UAAAA,MAAM,CAACS,UAAU,CAAC,GAAG,EAAE,CAAA;AACzB,SAAA;QAEAT,MAAM,CAACS,UAAU,CAAC,GAAG;UACnB,GAAGT,MAAM,CAACS,UAAU,CAAC;AACrB,UAAA,CAACR,GAAG,GAAGK,gBAAgB,CAACG,UAAU,CAAA;SACnC,CAAA;AACH,OAAA;AACF,KAAC,MAAM;AACLT,MAAAA,MAAM,CAACC,GAAG,CAAC,GAAGC,KAAK,CAAA;AACrB,KAAA;AACF,GAAA;AAEA,EAAA,OAAOF,MAAM,CAAA;AACf;;;;"}